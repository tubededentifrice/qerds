{% extends "base.html" %}

{% block title %}{{ _('auth.login_title') }}{% endblock %}

{% block body_class %}login-page{% endblock %}

{% block header %}
<header class="login-header">
    <div class="login-header-actions">
        {% include 'partials/language_switcher.html' %}
    </div>
</header>
{% endblock %}

{% block footer %}{% endblock %}

{% block main %}
<div class="login-container">
    <div class="login-brand">
        <svg class="logo-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="4" y="8" width="40" height="32" rx="2" stroke="currentColor" stroke-width="2.5"/>
            <path d="M4 14L24 28L44 14" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
            <circle cx="38" cy="14" r="6" fill="#E1000F"/>
            <path d="M38 11V17M38 17L35 14M38 17L41 14" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="brand-name">{{ _('common.app_title') }}</span>
        <span class="brand-tagline">{{ _('common.app_tagline') }}</span>
    </div>

    {% if qualification_mode == 'dev' %}
    <div class="alert alert--warning mb-6">
        <svg class="alert-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
        </svg>
        <div>
            <strong>{{ _('qualification.dev') }}</strong><br>
            {{ _('qualification.dev_warning') }}
        </div>
    </div>
    {% endif %}

    <div class="login-card">
        <h1 class="login-title">{{ _('auth.login_title') }}</h1>

        <a href="/auth/login?flow=sender_identity&redirect=/sender/dashboard" class="btn-franceconnect">
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
            </svg>
            {{ _('auth.franceconnect') }}
        </a>

        <p class="franceconnect-note">
            {{ _('auth.franceconnect_note') }}
        </p>

        <div class="login-divider">{{ _('auth.or') }}</div>

        <form class="login-form" action="/login" method="POST">
            <div class="form-group">
                <label for="email" class="form-label form-label--required">{{ _('form.email') }}</label>
                <input type="email" id="email" name="email" class="form-input" placeholder="{{ _('form.email_placeholder') }}" required>
            </div>

            <div class="form-group">
                <label for="password" class="form-label form-label--required">{{ _('form.password') }}</label>
                <input type="password" id="password" name="password" class="form-input" placeholder="{{ _('form.password_placeholder') }}" required>
                <p class="form-hint"><a href="/forgot-password">{{ _('auth.forgot_password') }}</a></p>
            </div>

            <button type="submit" class="btn btn--primary btn--block btn--lg mt-4">
                {{ _('auth.login') }}
            </button>
        </form>

        <p class="login-register-prompt">
            {{ _('auth.no_account') }} <a href="/register">{{ _('auth.create_account') }}</a>
        </p>
    </div>

    <p class="login-legal-links">
        {{ _('auth.terms_acceptance') }} <a href="/legal/terms">{{ _('auth.terms_of_use') }}</a><br>
        {{ _('auth.and') }} <a href="/legal/privacy">{{ _('auth.privacy_policy') }}</a>.
    </p>
</div>
{% endblock %}
