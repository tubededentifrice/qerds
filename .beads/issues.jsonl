{"id":"qerds-08k","title":"Refactor email templates to use i18n translation function","description":"The email templates (notification.html, reminder.html) currently use inline `{% if lang == 'fr' %}` conditionals instead of the standard `_('key')` translation function.\n\n**Current approach**:\n```html\n{% if lang == 'fr' %}\n    Bonjour,\n{% else %}\n    Hello,\n{% endif %}\n```\n\n**Target approach**:\n```html\n{{ _('email.greeting') }}\n```\n\n**Tasks**:\n1. Ensure translator is passed to email template rendering context\n2. Replace inline conditionals with translation calls in notification.html (13 instances)\n3. Replace inline conditionals with translation calls in reminder.html (17 instances)\n4. Add tests for email translation\n\n**Translation keys**: Already added to en.json and fr.json (email.* namespace)\n\n**Reference**: docs/audits/i18n-audit-2026-01-23.md","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:53:04.459256458Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:37:39.570943139Z","closed_at":"2026-01-23T04:37:39.570943139Z","close_reason":"Refactored email templates to use translator function"}
{"id":"qerds-0dq","title":"Set up phoss SMP for metadata publishing","description":"Configure phoss SMP for SMP/BDXR metadata publishing.\n\n## Requirements\n- Deploy phoss SMP in Docker Compose\n- Configure for QERDS metadata profile\n- Integration with qerds-api for metadata updates\n\n## Features\n- Publish service metadata\n- Update endpoint information\n- Certificate management\n\n## Acceptance\n- SMP starts in Docker Compose\n- Metadata is published correctly\n- Tests verify SMP responses\n\nRefs: specs/implementation/65-etsi-interop-profile.md, REQ-C04","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:06.628264+04:00","created_by":"Vincent","updated_at":"2026-01-22T21:06:18.156736917Z","closed_at":"2026-01-22T21:06:18.156736917Z","close_reason":"Closed","labels":["compliance:REQ-C04","component:smp","phase:10-as4","priority:medium"],"dependencies":[{"issue_id":"qerds-0dq","depends_on_id":"qerds-z6g","type":"blocks","created_at":"2026-01-18T11:42:06.629675+04:00","created_by":"Vincent"},{"issue_id":"qerds-0dq","depends_on_id":"qerds-9aj","type":"parent-child","created_at":"2026-01-22T10:10:31.977277815Z","created_by":"ubuntu"}]}
{"id":"qerds-0e7","title":"Add qualification claim guardrails (REQ-A01)","description":"Implement end-to-end guardrails so the platform cannot be misrepresented as a qualified service unless the operator is actually qualified.\n\n## Requirements\n- Implement a single source-of-truth `claim_state` / `qualification_mode` surfaced to UI + evidence generation.\n- Default to non-qualified mode in dev/test; require explicit operator configuration to enable qualified mode.\n- Ensure UI and generated artifacts never claim “qualified” unless `claim_state=qualified`.\n- Ensure docs and UI avoid misleading language (also ties into REQ-G01/REQ-G02, but this task tracks REQ-A01).\n\n## Acceptance\n- Non-qualified mode renders clear warnings and labels.\n- Switching claim_state changes only labels/presentation, not evidence truthfulness.\n- Tests cover the “no false qualified claims” guardrail.\n\nRefs: specs/implementation/10-claims-and-modes.md, REQ-A01\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:38:41.501748+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:58:56.502495894Z","closed_at":"2026-01-22T12:58:56.502495894Z","close_reason":"Closed","labels":["compliance:REQ-A01","component:compliance","phase:9-audit","priority:critical"],"dependencies":[{"issue_id":"qerds-0e7","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T12:40:07.480982+04:00","created_by":"Vincent"},{"issue_id":"qerds-0e7","depends_on_id":"qerds-0md","type":"blocks","created_at":"2026-01-18T12:40:07.58124+04:00","created_by":"Vincent"},{"issue_id":"qerds-0e7","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T12:40:07.679599+04:00","created_by":"Vincent"},{"issue_id":"qerds-0e7","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T12:40:07.772645+04:00","created_by":"Vincent"},{"issue_id":"qerds-0e7","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:32.01071617Z","created_by":"ubuntu"}]}
{"id":"qerds-0eh","title":"Implement content encryption at rest","description":"Implement content encryption for confidentiality (REQ-E01).\n\n## Requirements\n- Content encrypted before storage in object store\n- Key management via qerds-trust\n- Decryption only for authorized sessions\n- Content access gating (REQ-E02)\n\n## Implementation\n- AES-256-GCM for content encryption\n- Data Encryption Key (DEK) per content object\n- Key Encryption Key (KEK) managed by qerds-trust\n- Encryption metadata stored in content_objects table\n\n## Access Control\n- Only recipient can decrypt after acceptance\n- Sender can decrypt their own content\n- Admin cannot decrypt without proper authorization\n\n## Acceptance\n- Content is encrypted at rest\n- Decryption works for authorized users\n- Unauthorized access blocked\n- Tests verify encryption\n\nRefs: specs/implementation/05-architecture.md, REQ-E01, REQ-E02","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:21.656339+04:00","created_by":"Vincent","updated_at":"2026-01-22T19:26:18.17129067Z","closed_at":"2026-01-22T19:26:18.17129067Z","close_reason":"Closed","labels":["compliance:REQ-E01","compliance:REQ-E02","component:encryption","phase:4-trust","priority:high"],"dependencies":[{"issue_id":"qerds-0eh","depends_on_id":"qerds-0md","type":"blocks","created_at":"2026-01-18T11:43:21.658335+04:00","created_by":"Vincent"},{"issue_id":"qerds-0eh","depends_on_id":"qerds-rt5","type":"blocks","created_at":"2026-01-18T11:43:21.659396+04:00","created_by":"Vincent"},{"issue_id":"qerds-0eh","depends_on_id":"qerds-h3s","type":"blocks","created_at":"2026-01-18T12:36:52.132478+04:00","created_by":"Vincent"},{"issue_id":"qerds-0eh","depends_on_id":"qerds-uxv","type":"parent-child","created_at":"2026-01-22T10:10:32.042896906Z","created_by":"ubuntu"}]}
{"id":"qerds-0j6","title":"Create Preuve d'Acceptation (Proof of Acceptance) PDF template","description":"Create the PDF template for proof of acceptance.\n\n## Content\n- Provider header with logo\n- Document title: Preuve d'Acceptation\n- Delivery reference\n- Sender identity and address\n- Recipient identity (now revealed)\n- Subject line\n- Deposit timestamp\n- Acceptance timestamp\n- Recipient IAL level used for acceptance\n- Content hash/digest\n- Provider seal visualization\n- Verification instructions\n\n## Generated at EVT_ACCEPTED\n\n## Requirements\n- French language (with i18n)\n- Include both deposit and acceptance times\n- A4 format\n\n## Acceptance\n- PDF contains all required info\n- Times are clearly shown\n- Tests verify content\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-F07","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:08.245306+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:58:56.597013156Z","closed_at":"2026-01-22T12:58:56.597013156Z","close_reason":"Closed","labels":["compliance:REQ-F07","component:proof-templates","phase:8-pdf","priority:critical"],"dependencies":[{"issue_id":"qerds-0j6","depends_on_id":"qerds-4q6","type":"blocks","created_at":"2026-01-18T11:41:08.246422+04:00","created_by":"Vincent"},{"issue_id":"qerds-0j6","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:41:08.247203+04:00","created_by":"Vincent"},{"issue_id":"qerds-0j6","depends_on_id":"qerds-7of","type":"parent-child","created_at":"2026-01-22T10:10:32.074440173Z","created_by":"ubuntu"}]}
{"id":"qerds-0md","title":"Create qerds-trust service for signing and timestamping","description":"Implement the qerds-trust service per specs/implementation/45-trust-services.md.\n\n## Core Responsibilities\n- Provider attestation (seal/signature) over evidence payloads\n- Time attestation (RFC 3161 timestamp tokens)\n- Key lifecycle ceremony evidence\n\n## Service APIs (internal, mTLS required)\n- POST /trust/seal - seal canonical bytes with CMS/PKCS#7\n- POST /trust/timestamp - get RFC 3161 timestamp token\n- POST /trust/checkpoint - seal audit log checkpoints\n- GET /trust/keys - key inventory metadata\n- POST /trust/keys/{id}/rotate - key rotation (dual-control)\n\n## Modes\n- non_qualified: software keys (encrypted at rest), clearly labeled\n- qualified: PKCS#11 to HSM only, no fallback, fail closed\n\n## Requirements\n- All calls authenticated via mTLS\n- All operations logged\n- Algorithm suite versioning\n- Verification bundle output (certs, policies, algorithms)\n\n## Acceptance\n- Sealing produces valid CMS signatures\n- Timestamps are RFC 3161 compliant\n- Non-qualified mode works in dev\n- Tests cover crypto operations\n\nRefs: specs/implementation/45-trust-services.md, REQ-C02, REQ-C03, REQ-D04, REQ-G02","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:37:39.662044+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:35:19.580800889Z","closed_at":"2026-01-22T12:35:19.580800889Z","close_reason":"Closed","labels":["compliance:REQ-C02","compliance:REQ-C03","compliance:REQ-D03","compliance:REQ-D04","compliance:REQ-G02","component:crypto","phase:4-trust","priority:critical"],"dependencies":[{"issue_id":"qerds-0md","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T11:37:39.664215+04:00","created_by":"Vincent"},{"issue_id":"qerds-0md","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T12:36:53.179382+04:00","created_by":"Vincent"},{"issue_id":"qerds-0md","depends_on_id":"qerds-77e","type":"blocks","created_at":"2026-01-18T12:36:53.270763+04:00","created_by":"Vincent"},{"issue_id":"qerds-0md","depends_on_id":"qerds-uxv","type":"parent-child","created_at":"2026-01-22T10:10:32.107356283Z","created_by":"ubuntu"}]}
{"id":"qerds-0t9","title":"Implement sender new delivery form","description":"Create the new delivery form matching mocks/templates/sender/new.html.\n\n## Form Fields\n- Recipient email (required)\n- Recipient name (optional)\n- Subject (required)\n- Message (optional)\n- Document upload (required, PDF/DOC/DOCX/ODT, max 10MB)\n- Delivery type (standard/urgent radio buttons)\n\n## Actions\n- Cancel - go back\n- Save as draft\n- Send now\n\n## Requirements\n- Match mock design exactly\n- File upload with drag \u0026 drop\n- Form validation\n- Progress feedback\n- i18n support\n\n## Backend Integration\n- POST /sender/deliveries\n- POST /sender/deliveries/{id}/content\n- POST /sender/deliveries/{id}/deposit\n\n## Acceptance\n- Form matches mock\n- File upload works\n- Validation shows errors\n- Tests verify form flow\n\nRefs: mocks/templates/sender/new.html","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:56.643523+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:13:38.557622947Z","closed_at":"2026-01-22T13:13:38.557622947Z","close_reason":"Closed","labels":["component:sender","phase:7-frontend","priority:high"],"dependencies":[{"issue_id":"qerds-0t9","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T11:39:56.644516+04:00","created_by":"Vincent"},{"issue_id":"qerds-0t9","depends_on_id":"qerds-rt5","type":"blocks","created_at":"2026-01-18T11:39:56.645406+04:00","created_by":"Vincent"},{"issue_id":"qerds-0t9","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:32.134363221Z","created_by":"ubuntu"}]}
{"id":"qerds-0y5","title":"Create Preuve de Dépôt (Proof of Deposit) PDF template","description":"Create the PDF template for proof of deposit.\n\n## Content (per CPCE/LRE requirements)\n- Provider header with logo\n- Document title: Preuve de Dépôt\n- Delivery reference\n- Sender identity and address\n- Recipient identity and email\n- Subject line\n- Deposit timestamp (from evidence)\n- Content hash/digest\n- Provider seal visualization\n- Timestamp authority info\n- Verification instructions (proof ID + token)\n\n## Generated at EVT_DEPOSITED\n\n## Requirements\n- French language (with i18n structure for English)\n- Legal compliance with CPCE format\n- Include qualification_label (qualified/non-qualified)\n- A4 format\n\n## Acceptance\n- PDF contains all required info\n- Visually professional\n- Verification info is clear\n- Tests verify PDF content\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-F07","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:06.61414+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:58:56.566484529Z","closed_at":"2026-01-22T12:58:56.566484529Z","close_reason":"Closed","labels":["compliance:REQ-F07","component:proof-templates","phase:8-pdf","priority:critical"],"dependencies":[{"issue_id":"qerds-0y5","depends_on_id":"qerds-4q6","type":"blocks","created_at":"2026-01-18T11:41:06.615923+04:00","created_by":"Vincent"},{"issue_id":"qerds-0y5","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:41:06.61685+04:00","created_by":"Vincent"},{"issue_id":"qerds-0y5","depends_on_id":"qerds-7of","type":"parent-child","created_at":"2026-01-22T10:10:32.161034292Z","created_by":"ubuntu"}]}
{"id":"qerds-1dg","title":"Testing","description":"Unit tests, integration tests, e2e tests, and security tests","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:10:04.46899409Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.349871606Z","closed_at":"2026-01-23T04:51:38.349871606Z","close_reason":"All child tasks completed","labels":["epic","phase:11-testing"]}
{"id":"qerds-1id","title":"Implement delivery lifecycle state machine","description":"Create the core delivery state machine per specs/implementation/30-lifecycle-and-evidence.md.\n\n## States\n- draft -\u003e deposited -\u003e notified -\u003e notification_failed (retry path)\n- notified -\u003e available -\u003e accepted/refused -\u003e received/expired\n\n## State Transitions\n- Each transition must be validated\n- Transitions must be monotonic (no backwards)\n- Each transition creates evidence events\n\n## Evidence Events on Transition\n- EVT_DEPOSITED on deposit\n- EVT_NOTIFICATION_SENT on notification\n- EVT_NOTIFICATION_FAILED on bounce\n- EVT_AVAILABLE when content ready\n- EVT_ACCEPTED/EVT_REFUSED on decision\n- EVT_RECEIVED on content access\n- EVT_EXPIRED on timeout\n\n## Requirements\n- State machine class with validation\n- Database updates are atomic\n- All transitions logged\n- Support for jurisdiction_profile (fr_lre, eidas)\n- 15-day acceptance window enforcement (REQ-F04)\n\n## Acceptance\n- State machine enforces valid transitions only\n- Evidence events created correctly\n- Tests cover all paths\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-C01, REQ-F04","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:37:00.408789+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:19:01.399028492Z","closed_at":"2026-01-22T12:19:01.399028492Z","close_reason":"Closed","labels":["compliance:REQ-C01","compliance:REQ-F04","component:core","phase:3-lifecycle","priority:critical"],"dependencies":[{"issue_id":"qerds-1id","depends_on_id":"qerds-bpn","type":"blocks","created_at":"2026-01-18T11:37:00.40991+04:00","created_by":"Vincent"},{"issue_id":"qerds-1id","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T11:37:00.410634+04:00","created_by":"Vincent"},{"issue_id":"qerds-1id","depends_on_id":"qerds-fd0","type":"parent-child","created_at":"2026-01-22T10:10:32.189589902Z","created_by":"ubuntu"}]}
{"id":"qerds-1n3","title":"Write integration tests for recipient flow","description":"Create end-to-end integration tests for the recipient flow.\n\n## Test Scenarios\n1. Receive notification (mock)\n2. Click magic link\n3. Authenticate (mock FC+)\n4. View redacted delivery info\n5. Accept delivery\n6. Verify sender identity revealed\n7. Download content\n8. Download proof of acceptance\n\n## CPCE Compliance Tests\n- Sender identity hidden before accept\n- Sender identity visible after accept\n- 15-day window enforcement\n- Expiry handling\n\n## Acceptance\n- All scenarios pass\n- CPCE compliance verified\n- Tests are reproducible\n\nRefs: specs/implementation/35-apis.md, REQ-F03, REQ-F04","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:51.345279+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:36:32.389471393Z","closed_at":"2026-01-22T20:36:32.389471393Z","close_reason":"Closed","labels":["compliance:REQ-F03","component:integration","phase:11-testing","priority:high"],"dependencies":[{"issue_id":"qerds-1n3","depends_on_id":"qerds-pwn","type":"blocks","created_at":"2026-01-18T11:42:51.346479+04:00","created_by":"Vincent"},{"issue_id":"qerds-1n3","depends_on_id":"qerds-jbl","type":"blocks","created_at":"2026-01-18T11:42:51.347455+04:00","created_by":"Vincent"},{"issue_id":"qerds-1n3","depends_on_id":"qerds-x0y","type":"blocks","created_at":"2026-01-18T11:42:51.348171+04:00","created_by":"Vincent"},{"issue_id":"qerds-1n3","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:32.218984687Z","created_by":"ubuntu"}]}
{"id":"qerds-1z7","title":"Implement recipient accepted view (post-acceptance)","description":"Create the post-acceptance view matching mocks/templates/recipient/accepted.html.\n\n## View Elements\n- Success hero with green checkmark\n- Acceptance confirmation header\n- Full delivery info with:\n  - REVEALED sender identity\n  - Subject\n  - Deposit date\n  - Acceptance date\n  - Reference number\n- Content download section\n- Available proofs list\n\n## Actions\n- Download document button\n- Download proof buttons\n- Verify authenticity link\n\n## Requirements\n- Match mock design exactly\n- Sender identity NOW visible\n- i18n support\n\n## Acceptance\n- View matches mock\n- Sender revealed after acceptance\n- Downloads work\n- Tests verify flow\n\nRefs: mocks/templates/recipient/accepted.html","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:40:28.993777+04:00","created_by":"Vincent","updated_at":"2026-01-23T03:57:58.802668063Z","closed_at":"2026-01-23T03:57:58.802668063Z","close_reason":"Closed","labels":["component:recipient","phase:7-frontend","priority:high"],"dependencies":[{"issue_id":"qerds-1z7","depends_on_id":"qerds-grm","type":"blocks","created_at":"2026-01-18T11:40:28.994804+04:00","created_by":"Vincent"},{"issue_id":"qerds-1z7","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:32.247316068Z","created_by":"ubuntu"}]}
{"id":"qerds-21p","title":"Create penetration testing runbook (REQ-D06)","description":"Create docs/runbooks/penetration-testing.md documenting annual penetration testing procedures.\n\nContents:\n1. Pentest requirements\n   - Annual minimum frequency\n   - Scope: all externally-facing and critical internal systems\n   - Tester qualifications\n\n2. Engagement planning\n   - Selecting pentest provider\n   - Defining scope and rules of engagement\n   - Timing and coordination\n   - Emergency contacts\n\n3. Types of testing\n   - External network pentest\n   - Web application testing (OWASP methodology)\n   - API security testing\n   - Social engineering (optional)\n\n4. During the engagement\n   - Monitoring for issues\n   - Communication protocols\n   - Out-of-scope handling\n\n5. Results processing\n   - Receiving and reviewing report\n   - Severity classification\n   - Remediation planning\n\n6. Remediation workflow\n   - Critical/High: immediate remediation\n   - Medium: planned remediation\n   - Low: risk acceptance review\n   - Retest coordination\n\n7. Recording evidence\n   - Import findings to platform\n   - Store pentest report securely\n   - Include in audit pack\n\n8. Internal testing option\n   - Tools for internal assessment\n   - Limitations of internal testing\n   - When external testing is required\n\nReferences:\n- ETSI EN 319 401 penetration testing requirements\n- Implementing Regulation 2025/1944\n\nCovers: REQ-D06, REQ-H09","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:37:12.822151268Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.455220102Z","closed_at":"2026-01-23T03:57:48.455220102Z","close_reason":"Closed","labels":["docs","operations","security"]}
{"id":"qerds-24b","title":"Implement evidence object sealing and timestamping","description":"Create the evidence object sealing logic that uses qerds-trust.\n\n## Evidence Object Structure\n- payload: structured event fields\n- canonicalization: deterministic bytes\n- content_binding: cryptographic binding (SHA-256)\n- provider_attestation: CMS seal from qerds-trust\n- time_attestation: RFC 3161 timestamp\n- verification_bundle: certs, policies, algorithms\n- qualification_label: qualified/non_qualified (REQ-G02)\n\n## Requirements\n- Canonical serialization (deterministic)\n- Hash content and metadata\n- Call qerds-trust for sealing\n- Call qerds-trust for timestamping\n- Store verification bundle in object store\n- Track qualification_label\n\n## Acceptance\n- Evidence objects are properly sealed\n- Timestamps are included\n- Verification bundles are complete\n- Tests verify seal/timestamp validity\n\nRefs: specs/implementation/40-evidence-crypto-and-time.md, REQ-B02, REQ-C02, REQ-C03","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:37:50.312657+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:49:24.667479646Z","closed_at":"2026-01-22T12:49:24.667479646Z","close_reason":"Closed","labels":["compliance:REQ-B02","compliance:REQ-C02","compliance:REQ-C03","compliance:REQ-D03","compliance:REQ-G02","component:evidence","phase:4-trust","priority:critical"],"dependencies":[{"issue_id":"qerds-24b","depends_on_id":"qerds-a2n","type":"blocks","created_at":"2026-01-18T11:37:50.3146+04:00","created_by":"Vincent"},{"issue_id":"qerds-24b","depends_on_id":"qerds-0md","type":"blocks","created_at":"2026-01-18T11:37:50.315557+04:00","created_by":"Vincent"},{"issue_id":"qerds-24b","depends_on_id":"qerds-h3s","type":"blocks","created_at":"2026-01-18T12:36:52.224121+04:00","created_by":"Vincent"},{"issue_id":"qerds-24b","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T12:36:52.306834+04:00","created_by":"Vincent"},{"issue_id":"qerds-24b","depends_on_id":"qerds-uxv","type":"parent-child","created_at":"2026-01-22T10:10:32.273914684Z","created_by":"ubuntu"}]}
{"id":"qerds-26p","title":"Implement evidence event generation","description":"Create the evidence event generation system per specs/implementation/30-lifecycle-and-evidence.md.\n\n## Evidence Event Types\n- EVT_DEPOSITED\n- EVT_NOTIFICATION_SENT\n- EVT_NOTIFICATION_FAILED\n- EVT_AVAILABLE\n- EVT_ACCEPTED\n- EVT_REFUSED\n- EVT_RECEIVED\n- EVT_EXPIRED\n- EVT_CONTENT_ACCESSED\n\n## Event Structure\nEach event must include:\n- event_id (UUID)\n- delivery_id\n- event_type\n- event_time (with trusted time)\n- actor (sender/recipient/system) with identification refs\n- inputs_hashes (content/metadata hashes)\n- policy_snapshot_ref\n\n## Requirements\n- Events are immutable once created\n- Events include all required fields per spec\n- Actor identification tracked\n- Policy snapshot captured at event time\n- Pre-acceptance redaction profile support (REQ-F03)\n\n## Acceptance\n- Events contain all required fields\n- Events are correctly linked to deliveries\n- Tests verify event completeness\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-B01, REQ-B03, REQ-C01","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:37:02.140623+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:37:19.774385+04:00","labels":["compliance:REQ-B01","component:evidence","phase:3-lifecycle","priority:critical"],"deleted_at":"2026-01-18T11:37:19.774385+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-32e","title":"Implement session management and authentication middleware","description":"Create session management for authenticated users.\n\n## Requirements\n- Secure session tokens\n- Session storage (database-backed)\n- Session expiration\n- Multi-device support\n- Session revocation\n\n## Authentication Flows\n- FranceConnect+ OIDC callback handling\n- API key authentication for machine clients\n- Admin authentication\n\n## Middleware\n- Session validation on protected routes\n- User context injection\n- Auth events logged to security log\n\n## Acceptance\n- Sessions work correctly\n- Expired sessions are rejected\n- Tests cover auth scenarios\n\nRefs: specs/implementation/20-identities-and-roles.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:36:58.831817+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:35:19.550663282Z","closed_at":"2026-01-22T12:35:19.550663282Z","close_reason":"Closed","labels":["component:auth","phase:2-api","priority:critical"],"dependencies":[{"issue_id":"qerds-32e","depends_on_id":"qerds-4b9","type":"blocks","created_at":"2026-01-18T11:36:58.83342+04:00","created_by":"Vincent"},{"issue_id":"qerds-32e","depends_on_id":"qerds-77e","type":"blocks","created_at":"2026-01-18T12:36:52.57007+04:00","created_by":"Vincent"},{"issue_id":"qerds-32e","depends_on_id":"qerds-dbc","type":"parent-child","created_at":"2026-01-22T10:10:32.301928652Z","created_by":"ubuntu"}]}
{"id":"qerds-32p","title":"Add LRE retention policy enforcement (REQ-F05)","description":"Ensure LRE deliveries have minimum 1-year retention for proofs.\n\nImplementation:\n1. Add default LRE retention policy in migration/seed data\n   - delivery: 1 year minimum\n   - proof_of_receipt: 1 year minimum  \n   - audit_logs: 5 years (or configurable)\n   \n2. Verify retention service respects minimum_retention_days\n3. Add validation: cannot set retention \u003c legal minimum for LRE\n4. Add test: LRE delivery proofs not deleted before 1 year\n\nConfiguration:\n- QERDS_LRE_PROOF_RETENTION_DAYS=365 (minimum)\n- retention.py should enforce this floor\n\nTest coverage:\n- Retention policy creation with LRE defaults\n- Enforcement prevents early deletion\n- Override requires admin + audit log entry\n\nCovers: REQ-F05, REQ-H02","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:34:11.215580527Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.470583857Z","closed_at":"2026-01-23T03:57:48.470583857Z","close_reason":"Closed","labels":["compliance","feature","lre"]}
{"id":"qerds-36s","title":"Implement access review export functionality","description":"Create access review export for REQ-H06.\n\n## Export Contents\n- All RBAC bindings (user -\u003e role)\n- Last activity timestamps per user\n- Permission changes history\n\n## API\n- GET /admin/access-reviews/export\n\n## Format\n- Audit-friendly format (CSV or JSON)\n- Include timestamps\n- Include change history\n\n## Requirements\n- Admin-only access\n- Support for periodic reviews\n- Change attribution\n\n## Acceptance\n- Export generates correctly\n- All bindings included\n- Tests verify export content\n\nRefs: specs/implementation/20-identities-and-roles.md, REQ-H06","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:44:19.084993+04:00","created_by":"Vincent","updated_at":"2026-01-22T18:58:13.165068039Z","closed_at":"2026-01-22T18:58:13.165068039Z","close_reason":"Closed","labels":["compliance:REQ-H06","component:access-review","phase:9-audit","priority:high"],"dependencies":[{"issue_id":"qerds-36s","depends_on_id":"qerds-j55","type":"blocks","created_at":"2026-01-18T11:44:19.086318+04:00","created_by":"Vincent"},{"issue_id":"qerds-36s","depends_on_id":"qerds-4b9","type":"blocks","created_at":"2026-01-18T11:44:19.087211+04:00","created_by":"Vincent"},{"issue_id":"qerds-36s","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:32.328369834Z","created_by":"ubuntu"}]}
{"id":"qerds-3b9","title":"Align CryptoSettings.signature_algorithm with actual implementation","description":"The CryptoSettings class in src/qerds/core/config.py specifies Ed25519 as the signature_algorithm, but the actual implementation in src/qerds/services/trust.py uses ECDSA P-384 (SECP384R1).\n\nOptions:\n1. Update config.py to reflect actual implementation (ECDSA-P384)\n2. Change trust.py to use Ed25519\n3. Keep both supported with configurable selection\n\nRecommendation: Option 1 - update config.py to match reality since ECDSA P-384 aligns with ENISA recommendations and provides higher security strength.\n\nReferences:\n- src/qerds/core/config.py line 331: signature_algorithm default is Ed25519\n- src/qerds/services/trust.py line 1716: uses ec.generate_private_key(ec.SECP384R1())\n\nDiscovered during: qerds-bul (cryptographic mechanisms documentation)","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:49:14.994007332Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:02:56.997141452Z","closed_at":"2026-01-23T04:02:56.997141452Z","close_reason":"Updated CryptoSettings.signature_algorithm default from Ed25519 to ECDSA-P384 to match actual implementation in trust.py"}
{"id":"qerds-3uw","title":"Set up Jinja2 templates and static files serving","description":"Configure FastAPI to serve Jinja2 templates and static files for the frontend.\n\n## Requirements\n- Jinja2 template configuration\n- Static files serving (CSS, JS, fonts from mocks)\n- Template inheritance structure matching mocks\n- Context processors for common data (user, qualification_mode)\n- i18n integration (French + English per SPEC-J01, SPEC-J02)\n\n## Template Structure (from mocks/)\n- base.html - main layout\n- partials/ - reusable components\n- login.html\n- sender/dashboard.html, new.html\n- recipient/pickup.html, accepted.html\n- admin/dashboard.html\n- verify.html\n\n## Static Assets\n- CSS from mocks/static/css/main.css\n- JS from mocks/static/js/main.js\n- Self-hosted fonts (no CDN at runtime)\n\n## Acceptance\n- Templates render correctly\n- Static files are served\n- i18n switching works\n- Tests verify page rendering\n\nRefs: mocks/, AGENTS.md (CSS guidelines)","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:29.290326+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:19:01.429896863Z","closed_at":"2026-01-22T12:19:01.429896863Z","close_reason":"Closed","labels":["component:templates","phase:7-frontend","priority:critical"],"dependencies":[{"issue_id":"qerds-3uw","depends_on_id":"qerds-80v","type":"blocks","created_at":"2026-01-18T11:39:29.291895+04:00","created_by":"Vincent"},{"issue_id":"qerds-3uw","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:32.356081668Z","created_by":"ubuntu"}]}
{"id":"qerds-45k","title":"Implement background worker service (qerds-worker)","description":"Create the background worker service for async processing.\n\n## Job Types\n- send_notification - send initial/reminder emails\n- check_expiry - check for 15-day window expiry\n- process_bounce - handle email bounces\n- seal_checkpoint - periodic audit log sealing\n- enforce_retention - cleanup per retention policy\n\n## Requirements\n- Use PostgreSQL-backed job queue\n- Worker process lifecycle management\n- Graceful shutdown\n- Error handling and retries\n- Monitoring/health checks\n- Support for scheduled jobs\n\n## Scheduled Tasks\n- Expiry check: check deliveries past acceptance_deadline_at\n- Checkpoint sealing: periodic (e.g., hourly)\n- Retention enforcement: daily\n\n## Acceptance\n- Worker processes jobs reliably\n- Scheduled tasks run on time\n- Errors are handled gracefully\n- Tests cover all job types\n\nRefs: specs/implementation/05-architecture.md, REQ-F04, REQ-C05","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:06.200214+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:39:13.585956+04:00","labels":["component:worker","phase:6-notifications","priority:high"],"deleted_at":"2026-01-18T11:39:13.585956+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-4b9","title":"Implement RBAC/ABAC authorization system","description":"Create the authorization system for role-based and attribute-based access control.\n\n## Role Classes (per specs/implementation/20-identities-and-roles.md)\n- admin\n- security_officer\n- auditor\n- support\n- registration_officer\n- sender_user\n- recipient_user\n- api_client\n\n## Requirements\n- Role definitions in database\n- Permission checking middleware\n- Separation of duties enforcement\n- Dual-control for sensitive operations (key ops, config changes)\n- All authorization events logged\n\n## ABAC Attributes\n- Organization membership\n- Case assignment\n- Environment\n- Purpose-of-access\n\n## Acceptance\n- Roles are enforced on all endpoints\n- Unauthorized access is blocked and logged\n- Tests cover permission scenarios\n\nRefs: specs/implementation/20-identities-and-roles.md, REQ-D02, REQ-H06","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:36:27.896346+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:06:43.874893326Z","closed_at":"2026-01-22T12:06:43.874893326Z","close_reason":"Closed","labels":["compliance:REQ-D02","compliance:REQ-H06","component:auth","phase:2-api","priority:critical"],"dependencies":[{"issue_id":"qerds-4b9","depends_on_id":"qerds-bpn","type":"blocks","created_at":"2026-01-18T11:36:27.897473+04:00","created_by":"Vincent"},{"issue_id":"qerds-4b9","depends_on_id":"qerds-dbc","type":"parent-child","created_at":"2026-01-22T10:10:32.384450909Z","created_by":"ubuntu"}]}
{"id":"qerds-4kd","title":"Write end-to-end tests for complete LRE flow","description":"Create full end-to-end tests for the complete LRE lifecycle.\n\n## Test Scenario\n1. Sender creates and deposits delivery\n2. Notification is sent\n3. Recipient receives magic link\n4. Recipient authenticates via FC+\n5. Recipient accepts delivery\n6. Content is downloaded\n7. All proofs are generated\n8. Verification works\n\n## Variations\n- Accept flow\n- Refuse flow\n- Expiry flow\n\n## CPCE Compliance Verification\n- Sender identity redaction\n- 15-day window\n- Consumer consent check\n\n## Acceptance\n- All flows work end-to-end\n- Evidence is valid throughout\n- CPCE compliance verified\n- Tests run in Docker\n\nRefs: specs/requirements.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:44:22.484282+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:55:03.263890199Z","closed_at":"2026-01-22T20:55:03.263890199Z","close_reason":"Closed","labels":["component:e2e","phase:11-testing","priority:critical"],"dependencies":[{"issue_id":"qerds-4kd","depends_on_id":"qerds-1n3","type":"blocks","created_at":"2026-01-18T11:44:22.485498+04:00","created_by":"Vincent"},{"issue_id":"qerds-4kd","depends_on_id":"qerds-4qg","type":"blocks","created_at":"2026-01-18T11:44:22.48646+04:00","created_by":"Vincent"},{"issue_id":"qerds-4kd","depends_on_id":"qerds-0y5","type":"blocks","created_at":"2026-01-18T11:44:22.487256+04:00","created_by":"Vincent"},{"issue_id":"qerds-4kd","depends_on_id":"qerds-0j6","type":"blocks","created_at":"2026-01-18T11:44:22.487997+04:00","created_by":"Vincent"},{"issue_id":"qerds-4kd","depends_on_id":"qerds-6nu","type":"blocks","created_at":"2026-01-18T11:44:22.488736+04:00","created_by":"Vincent"},{"issue_id":"qerds-4kd","depends_on_id":"qerds-jp9","type":"blocks","created_at":"2026-01-18T11:44:22.489454+04:00","created_by":"Vincent"},{"issue_id":"qerds-4kd","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:32.412565766Z","created_by":"ubuntu"}]}
{"id":"qerds-4nt","title":"Implement ASiC-E evidence export format for EN 319 522-4-3","description":"Gap 3 from ETSI EN 319 522 compliance audit.\n\nEN 319 522-4-3 specifies an evidence exchange format for cross-provider scenarios. Current implementation stores evidence internally but does not provide a standardized export format.\n\nCurrent: Evidence stored as JSON in object store.\n\nRequired: ASiC-E container with XAdES/CAdES signatures for external exchange.\n\nRemediation: Implement evidence export function that produces EN 319 522-4-3 compliant containers:\n- ASiC-E envelope\n- XAdES-B-LT or CAdES-B-LT signatures\n- Manifest with content references\n\nAffected files:\n- New: src/qerds/services/evidence_export.py\n\nPriority: Low - Required only for evidence portability to external systems\nCovers: REQ-C04\n\nSee: docs/compliance/etsi-319-522-mapping.md","status":"open","priority":3,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:50:43.540401385Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:50:43.540401385Z"}
{"id":"qerds-4q6","title":"Set up WeasyPrint for PDF proof generation","description":"Configure WeasyPrint for generating human-readable PDF proofs.\n\n## Requirements\n- WeasyPrint integration with FastAPI\n- HTML/CSS templates for proofs\n- Consistent styling with web UI\n- Support for French government styling\n- Embedded fonts (self-hosted)\n- Qualified seal visualization (or non-qualified in dev)\n\n## Template Approach\n- Use Jinja2 templates for PDF HTML\n- Same CSS variables where applicable\n- A4 page format\n- Legal footer with verification info\n\n## Acceptance\n- WeasyPrint generates valid PDFs\n- PDFs render correctly\n- Fonts are embedded\n- Tests verify PDF generation\n\nRefs: REQ-F07","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:40:47.822906+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:19:01.460329951Z","closed_at":"2026-01-22T12:19:01.460329951Z","close_reason":"Closed","labels":["compliance:REQ-F07","component:pdf","phase:8-pdf","priority:critical"],"dependencies":[{"issue_id":"qerds-4q6","depends_on_id":"qerds-esn","type":"blocks","created_at":"2026-01-18T11:40:47.82496+04:00","created_by":"Vincent"},{"issue_id":"qerds-4q6","depends_on_id":"qerds-7of","type":"parent-child","created_at":"2026-01-22T10:10:32.442167227Z","created_by":"ubuntu"}]}
{"id":"qerds-4qg","title":"Write integration tests for sender flow","description":"Create end-to-end integration tests for the sender flow.\n\n## Test Scenarios\n1. Create draft delivery\n2. Upload content\n3. Deposit and send\n4. Verify evidence created\n5. Download proof of deposit\n\n## Requirements\n- Tests run against Docker environment\n- Full API flow tested\n- Evidence verification included\n\n## Acceptance\n- All scenarios pass\n- Evidence is valid\n- Tests are reproducible\n\nRefs: specs/implementation/35-apis.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:49.670704+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:36:32.42671695Z","closed_at":"2026-01-22T20:36:32.42671695Z","close_reason":"Closed","labels":["component:integration","phase:11-testing","priority:high"],"dependencies":[{"issue_id":"qerds-4qg","depends_on_id":"qerds-pwn","type":"blocks","created_at":"2026-01-18T11:42:49.671831+04:00","created_by":"Vincent"},{"issue_id":"qerds-4qg","depends_on_id":"qerds-rt5","type":"blocks","created_at":"2026-01-18T11:42:49.672784+04:00","created_by":"Vincent"},{"issue_id":"qerds-4qg","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:32.477234282Z","created_by":"ubuntu"}]}
{"id":"qerds-5gc","title":"Frontend Views","description":"Jinja2 templates, user interfaces, and i18n","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:54.180269965Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.231744676Z","closed_at":"2026-01-23T04:51:38.231744676Z","close_reason":"All child tasks completed","labels":["epic","phase:7-frontend"]}
{"id":"qerds-5jg","title":"Notifications System","description":"Email notifications, background worker, and job queue","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:52.85119047Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.202447401Z","closed_at":"2026-01-23T04:51:38.202447401Z","close_reason":"All child tasks completed","labels":["epic","phase:6-notifications"]}
{"id":"qerds-5rt","title":"Implement login page and authentication views","description":"Create the login page and authentication views matching mocks/templates/login.html.\n\n## Views\n- GET /login - login page with FranceConnect+ button\n- GET /auth/callback - OIDC callback handler\n- GET /logout - logout handler\n\n## Requirements\n- Match mock design exactly\n- FranceConnect+ button styling\n- Dev mode warning banner\n- Alternative email/password form (for non-FC+ auth)\n- i18n support (French + English)\n\n## Acceptance\n- Login page matches mock\n- FranceConnect+ flow works\n- Dev banner shows in non-qualified mode\n- Responsive design\n\nRefs: mocks/templates/login.html","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:30.953996+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:39:51.263704+04:00","labels":["component:auth","phase:7-frontend","priority:critical"],"deleted_at":"2026-01-18T11:39:51.263704+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-5s2","title":"Internationalize API error messages","description":"API routers contain hardcoded English error messages that should be internationalized.\n\n**Affected files**:\n- pickup.py - 13 hardcoded messages\n- sender.py - 11 hardcoded messages\n- auth.py - 6 hardcoded messages\n- trust.py - 4 hardcoded messages\n- as4.py - 1 hardcoded message\n\n**Examples**:\n```python\nraise HTTPException(\n    status_code=status.HTTP_404_NOT_FOUND,\n    detail='Delivery not found',  # Should be localized\n)\n```\n\n**Tasks**:\n1. Create helper function to get localized error messages based on request Accept-Language\n2. Update router exception handlers to use localized messages\n3. Consider middleware approach for consistent error localization\n\n**Translation keys**: Already added to en.json and fr.json (errors.* namespace with 18 new keys)\n\n**Reference**: docs/audits/i18n-audit-2026-01-23.md","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:53:18.811499699Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:37:38.889729991Z","closed_at":"2026-01-23T04:37:38.889729991Z","close_reason":"Implemented i18n for API error messages in all routers"}
{"id":"qerds-5wd","title":"Add ETSI format version header to sealed evidence","description":"Gap 2 from ETSI EN 319 522 compliance audit.\n\nEN 319 522-4-1 recommends including a format version identifier in the evidence structure for forward compatibility.\n\nCurrent: Canonicalization version is tracked (CANONICALIZATION_VERSION = \"1.0\") but not exposed as a formal header field.\n\nRemediation: Include format version in the sealed evidence payload:\n{\n    \"format_version\": \"ETSI-EN-319-522-4-1:2024-01\",\n    \"canonicalization_version\": \"1.0\",\n    ...\n}\n\nAffected files:\n- src/qerds/services/evidence_sealer.py\n\nPriority: Low - Recommended for future-proofing\nCovers: REQ-C04\n\nSee: docs/compliance/etsi-319-522-mapping.md","status":"closed","priority":3,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:50:34.470819544Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:04:23.640505166Z","closed_at":"2026-01-23T04:04:23.640505166Z","close_reason":"Added ETSI_FORMAT_VERSION constant and format_version field to SealedEvidence per EN 319 522-4-1. All 55 evidence sealer tests pass."}
{"id":"qerds-61v","title":"Audit evidence format against ETSI EN 319 522 (REQ-C04)","description":"Verify evidence structures comply with ETSI EN 319 522-4-x requirements.\n\nStandards to check:\n- ETSI EN 319 522-4-1: Evidence record format\n- ETSI EN 319 522-4-2: Semantic contents\n- ETSI EN 319 522-4-3: Interoperability\n\nAudit tasks:\n1. Compare evidence.py EvidenceEvent fields against 319 522-4-1\n2. Verify mandatory fields are present:\n   - Event type, timestamp, actors, hashes\n   - Seal/signature structure\n   - Policy references\n   \n3. Verify AS4 message format (as4_sender.py) against 319 522-4-3\n4. Document any gaps or non-compliance\n5. Create compliance mapping document\n\nDeliverable:\n- docs/compliance/etsi-319-522-mapping.md\n\nCovers: REQ-C04","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:34:13.699955967Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:51:10.686402821Z","closed_at":"2026-01-23T03:51:10.686402821Z","close_reason":"Completed ETSI EN 319 522 compliance audit. Created docs/compliance/etsi-319-522-mapping.md with detailed field-by-field analysis. Identified 5 gaps and created follow-up issues: qerds-ukg (Gap 1), qerds-5wd (Gap 2), qerds-4nt (Gap 3), qerds-cln (Gap 4 - BLOCKING), qerds-87b (Gap 5).","labels":["audit","compliance","etsi"]}
{"id":"qerds-66j","title":"Backend/frontend separation boundaries (REQ-I01)","description":"Enforce a clear backend/frontend separation in repository layout, build artifacts, and Docker images.\n\n## Requirements\n- Define what constitutes the certified core (backend) vs frontend assets.\n- Ensure Docker images/build steps keep backend logic isolated from UI assets where feasible.\n- Ensure frontend can be updated without requiring changes to backend core modules (as a design goal).\n\n## Acceptance\n- Repo and Docker structure reflects a clear separation.\n- Documented boundaries exist and are enforceable in CI/build.\n\nRefs: specs/requirements.md, specs/implementation/05-architecture.md, REQ-I01\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:44.47991+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:49:24.699516858Z","closed_at":"2026-01-22T12:49:24.699516858Z","close_reason":"Closed","labels":["compliance:REQ-I01","component:architecture","phase:0-setup","priority:high"],"dependencies":[{"issue_id":"qerds-66j","depends_on_id":"qerds-esn","type":"blocks","created_at":"2026-01-18T12:40:41.213123+04:00","created_by":"Vincent"},{"issue_id":"qerds-66j","depends_on_id":"qerds-80v","type":"blocks","created_at":"2026-01-18T12:40:41.307333+04:00","created_by":"Vincent"},{"issue_id":"qerds-66j","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T12:40:41.397343+04:00","created_by":"Vincent"},{"issue_id":"qerds-66j","depends_on_id":"qerds-znp","type":"parent-child","created_at":"2026-01-22T10:10:32.504863271Z","created_by":"ubuntu"}]}
{"id":"qerds-6nu","title":"Create Preuve de Refus (Proof of Refusal) PDF template","description":"Create the PDF template for proof of refusal.\n\n## Content\n- Provider header with logo\n- Document title: Preuve de Refus\n- Delivery reference\n- Sender identity\n- Recipient identity (revealed after refusal)\n- Subject line\n- Deposit timestamp\n- Refusal timestamp\n- Provider seal visualization\n- Verification instructions\n\n## Generated at EVT_REFUSED\n\n## Requirements\n- French language (with i18n)\n- A4 format\n\n## Acceptance\n- PDF contains all required info\n- Tests verify content\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-F07","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:10.633166+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:13:37.072546025Z","closed_at":"2026-01-22T13:13:37.072546025Z","close_reason":"Closed","labels":["compliance:REQ-F07","component:proof-templates","phase:8-pdf","priority:high"],"dependencies":[{"issue_id":"qerds-6nu","depends_on_id":"qerds-4q6","type":"blocks","created_at":"2026-01-18T11:41:10.635141+04:00","created_by":"Vincent"},{"issue_id":"qerds-6nu","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:41:10.636073+04:00","created_by":"Vincent"},{"issue_id":"qerds-6nu","depends_on_id":"qerds-7of","type":"parent-child","created_at":"2026-01-22T10:10:32.532462415Z","created_by":"ubuntu"}]}
{"id":"qerds-6t4","title":"Implement dispute timeline reconstruction","description":"Create dispute reconstruction feature for REQ-H10.\n\n## Features\n- Enumerate all evidence events for a delivery in order\n- Provide verification outputs for each evidence object\n- Produce controlled disclosure export\n- Support redaction for privacy\n\n## API\n- GET /admin/deliveries/{id}/timeline - get full timeline\n- POST /admin/deliveries/{id}/export - create disclosure pack\n\n## Requirements\n- Include all evidence events\n- Verify each piece of evidence\n- Redaction support for GDPR\n- Access controlled (admin only)\n\n## Acceptance\n- Timelines are complete\n- Verification results included\n- Exports are correctly redacted\n- Tests verify reconstruction\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-H10","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:33.391501+04:00","created_by":"Vincent","updated_at":"2026-01-22T18:54:07.480341118Z","closed_at":"2026-01-22T18:54:07.480341118Z","close_reason":"Closed","labels":["compliance:REQ-H10","component:disputes","phase:9-audit","priority:high"],"dependencies":[{"issue_id":"qerds-6t4","depends_on_id":"qerds-j55","type":"blocks","created_at":"2026-01-18T11:41:33.392751+04:00","created_by":"Vincent"},{"issue_id":"qerds-6t4","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:41:33.39366+04:00","created_by":"Vincent"},{"issue_id":"qerds-6t4","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:32.560741559Z","created_by":"ubuntu"}]}
{"id":"qerds-6yi","title":"Implement Verification API endpoints","description":"Create the public verification API endpoints per specs/implementation/35-apis.md.\n\n## Endpoints\n- GET /verify/proofs/{proof_id}?token=... - verify proof authenticity\n- GET /verify/deliveries/{id}/status?token=... - check delivery status\n\n## Requirements\n- Token-gated access (no full auth required)\n- Minimal PII exposure (REQ-E03)\n- Pre-acceptance: no sender identity revealed (REQ-F03)\n- Verification output includes:\n  - Proof validity (signature/timestamp)\n  - Delivery existence\n  - Timestamps\n  - Integrity status\n- Support for third-party verifiers (CPCE REQ-F01)\n\n## Acceptance\n- Verification works for valid proofs\n- Invalid proofs are rejected\n- Sender identity protected pre-acceptance\n- Tests verify all scenarios\n\nRefs: specs/implementation/35-apis.md, REQ-F01, REQ-F03, REQ-E03","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:38:36.033871+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:13:38.484795606Z","closed_at":"2026-01-22T13:13:38.484795606Z","close_reason":"Closed","labels":["compliance:REQ-E03","compliance:REQ-F01","compliance:REQ-F03","component:verify","phase:2-api","priority:high"],"dependencies":[{"issue_id":"qerds-6yi","depends_on_id":"qerds-80v","type":"blocks","created_at":"2026-01-18T11:38:36.035824+04:00","created_by":"Vincent"},{"issue_id":"qerds-6yi","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:38:36.036625+04:00","created_by":"Vincent"},{"issue_id":"qerds-6yi","depends_on_id":"qerds-dbc","type":"parent-child","created_at":"2026-01-22T10:10:32.588373804Z","created_by":"ubuntu"}]}
{"id":"qerds-77e","title":"Implement security event logging","description":"Create security-specific event logging for REQ-D08.\n\n## Security Events to Log\n- Authentication attempts (success/failure)\n- Authorization decisions\n- Admin actions\n- Key operations\n- Configuration changes\n- Access to sensitive data\n\n## Requirements\n- Structured log format\n- Tamper-evident (part of audit log)\n- Include actor identity\n- Include action details\n- Include timestamp\n\n## Integration\n- Hook into auth middleware\n- Hook into admin endpoints\n- Hook into qerds-trust\n\n## Acceptance\n- All security events logged\n- Logs are tamper-evident\n- Can be exported for audit\n- Tests verify logging\n\nRefs: specs/implementation/50-audit-logging-and-immutability.md, REQ-D08","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:44:17.373847+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:19:01.352430629Z","closed_at":"2026-01-22T12:19:01.352430629Z","close_reason":"Closed","labels":["compliance:REQ-D08","component:security","phase:1-backend","priority:critical"],"dependencies":[{"issue_id":"qerds-77e","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T11:44:17.376075+04:00","created_by":"Vincent"},{"issue_id":"qerds-77e","depends_on_id":"qerds-4b9","type":"blocks","created_at":"2026-01-18T11:44:17.377136+04:00","created_by":"Vincent"},{"issue_id":"qerds-77e","depends_on_id":"qerds-az5","type":"parent-child","created_at":"2026-01-22T10:10:32.617909373Z","created_by":"ubuntu"}]}
{"id":"qerds-77m","title":"Write unit tests for cryptographic operations","description":"Create comprehensive tests for crypto/evidence sealing.\n\n## Test Coverage\n- CMS signature generation and validation\n- RFC 3161 timestamp token handling\n- Hash computation\n- Verification bundle completeness\n- Qualification label enforcement\n- Key rotation scenarios\n\n## Requirements\n- 95%+ coverage for crypto code\n- Use test keys (no real HSM in tests)\n- Verify signature validity\n- Test for algorithm agility\n\n## Acceptance\n- All tests pass\n- Crypto operations verified\n- Edge cases covered\n\nRefs: specs/implementation/40-evidence-crypto-and-time.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:46.771558+04:00","created_by":"Vincent","updated_at":"2026-01-22T18:56:56.139712195Z","closed_at":"2026-01-22T18:56:56.139712195Z","close_reason":"Closed","labels":["component:unit-tests","phase:11-testing","priority:critical"],"dependencies":[{"issue_id":"qerds-77m","depends_on_id":"qerds-pwn","type":"blocks","created_at":"2026-01-18T11:42:46.773492+04:00","created_by":"Vincent"},{"issue_id":"qerds-77m","depends_on_id":"qerds-0md","type":"blocks","created_at":"2026-01-18T11:42:46.77461+04:00","created_by":"Vincent"},{"issue_id":"qerds-77m","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:42:46.775627+04:00","created_by":"Vincent"},{"issue_id":"qerds-77m","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:32.646691996Z","created_by":"ubuntu"}]}
{"id":"qerds-7ad","title":"Implement recipient accepted view (post-acceptance)","description":"Create the post-acceptance view matching mocks/templates/recipient/accepted.html.\n\n## View Elements\n- Success hero with green checkmark\n- Acceptance confirmation header\n- Full delivery info with:\n  - REVEALED sender identity\n  - Subject\n  - Deposit date\n  - Acceptance date\n  - Reference number\n- Content download section\n- Available proofs list\n\n## Actions\n- Download document button\n- Download proof buttons\n- Verify authenticity link\n\n## Requirements\n- Match mock design exactly\n- Sender identity NOW visible\n- i18n support\n\n## Acceptance\n- View matches mock\n- Sender revealed after acceptance\n- Downloads work\n- Tests verify flow\n\nRefs: mocks/templates/recipient/accepted.html","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:40:11.059061+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:40:27.248129+04:00","labels":["component:recipient","phase:7-frontend","priority:high"],"deleted_at":"2026-01-18T11:40:27.248129+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-7br","title":"Implement PostgreSQL-backed job queue","description":"Create a custom PostgreSQL-backed job queue for background processing.\n\n## Requirements\n- Use SELECT ... FOR UPDATE SKIP LOCKED pattern\n- Support for scheduled jobs (run_at)\n- Retry logic with exponential backoff\n- Job types for:\n  - Notification sending\n  - Scheduled transitions (expiry, 15-day window)\n  - Log checkpoint sealing\n  - Retention enforcement\n\n## Database Schema\n- jobs table with job_id, job_type, run_at, locked_at, locked_by, attempts, payload_json\n\n## Features\n- Worker can process multiple job types\n- Dead letter handling for failed jobs\n- Job status tracking\n- Graceful shutdown\n\n## Acceptance\n- Jobs are processed reliably\n- Failed jobs are retried\n- No duplicate processing\n- Tests cover edge cases\n\nRefs: specs/implementation/05-architecture.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:36:06.973283+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:06:43.818726791Z","closed_at":"2026-01-22T12:06:43.818726791Z","close_reason":"Closed","labels":["component:worker","phase:1-backend","priority:high"],"dependencies":[{"issue_id":"qerds-7br","depends_on_id":"qerds-bpn","type":"blocks","created_at":"2026-01-18T11:36:06.974898+04:00","created_by":"Vincent"},{"issue_id":"qerds-7br","depends_on_id":"qerds-az5","type":"parent-child","created_at":"2026-01-22T10:10:32.673982273Z","created_by":"ubuntu"}]}
{"id":"qerds-7gp","title":"Document backup/DR procedures (REQ-D09)","description":"Already exists at docs/runbooks/backup-dr.md. Mark as complete or review for updates.","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:07.799736632Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:39:13.244147759Z","closed_at":"2026-01-23T03:39:13.244150474Z","labels":["docs","operations"]}
{"id":"qerds-7ij","title":"Implement retention policy enforcement","description":"Create retention policy enforcement for CPCE compliance.\n\n## Requirements (per REQ-F05, REQ-H02)\n- Minimum 1 year retention for proof of receipt\n- Configurable retention policies per artifact type\n- Retention actions tracking (archive/delete)\n- Audit logging of all retention actions\n\n## Database Tables\n- retention_policies\n- retention_actions\n\n## Worker Job\n- Daily retention enforcement job\n- Archive artifacts past retention\n- Delete only after archive confirmation\n- Never delete before minimum period\n\n## Acceptance\n- Policies are enforced correctly\n- Actions are logged\n- No premature deletion\n- Tests verify retention logic\n\nRefs: specs/implementation/70-storage-and-retention.md, REQ-F05, REQ-H02","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:31.968835+04:00","created_by":"Vincent","updated_at":"2026-01-22T18:35:15.905658403Z","closed_at":"2026-01-22T18:35:15.905658403Z","close_reason":"Closed","labels":["compliance:REQ-F05","compliance:REQ-H02","component:retention","phase:9-audit","priority:high"],"dependencies":[{"issue_id":"qerds-7ij","depends_on_id":"qerds-zni","type":"blocks","created_at":"2026-01-18T11:41:31.970021+04:00","created_by":"Vincent"},{"issue_id":"qerds-7ij","depends_on_id":"qerds-bpn","type":"blocks","created_at":"2026-01-18T11:41:31.97091+04:00","created_by":"Vincent"},{"issue_id":"qerds-7ij","depends_on_id":"qerds-h3s","type":"blocks","created_at":"2026-01-18T12:36:52.39508+04:00","created_by":"Vincent"},{"issue_id":"qerds-7ij","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T12:36:52.482851+04:00","created_by":"Vincent"},{"issue_id":"qerds-7ij","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:32.700621214Z","created_by":"ubuntu"}]}
{"id":"qerds-7of","title":"PDF Proof Generation","description":"WeasyPrint setup and PDF proof templates","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:10:01.410708917Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.261259557Z","closed_at":"2026-01-23T04:51:38.261259557Z","close_reason":"All child tasks completed","labels":["epic","phase:8-pdf"]}
{"id":"qerds-7r9","title":"Implement key lifecycle management","description":"Create key lifecycle management for REQ-H07.\n\n## Key Types\n- Evidence sealing key\n- Audit log chain key\n- Content encryption KEK\n- Timestamp key (if self-hosted TSA)\n\n## Lifecycle Events\n- Generate\n- Activate\n- Rotate\n- Revoke\n- Retire\n\n## Requirements\n- Dual-control for sensitive operations\n- Ceremony log generation\n- Key inventory tracking\n- HSM integration for qualified mode\n\n## API\n- GET /trust/keys - key inventory\n- POST /trust/keys/{id}/rotate - rotate key\n- POST /trust/keys/ceremony - initiate key ceremony\n\n## Acceptance\n- Key lifecycle tracked\n- Ceremony logs generated\n- Dual-control enforced\n- Tests verify lifecycle\n\nRefs: specs/implementation/45-trust-services.md, REQ-H07","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:44.839621+04:00","created_by":"Vincent","updated_at":"2026-01-22T19:26:09.003306355Z","closed_at":"2026-01-22T19:26:09.003306355Z","close_reason":"Closed","labels":["compliance:REQ-H07","component:keys","phase:4-trust","priority:high"],"dependencies":[{"issue_id":"qerds-7r9","depends_on_id":"qerds-0md","type":"blocks","created_at":"2026-01-18T11:43:44.841796+04:00","created_by":"Vincent"},{"issue_id":"qerds-7r9","depends_on_id":"qerds-uxv","type":"parent-child","created_at":"2026-01-22T10:10:32.727528636Z","created_by":"ubuntu"}]}
{"id":"qerds-80v","title":"Create FastAPI application structure with API segmentation","description":"Set up the FastAPI application with proper API namespace segmentation.\n\n## API Namespaces (per specs/implementation/35-apis.md)\n- /sender/* - Sender operations (authenticated)\n- /recipient/* - Recipient portal operations\n- /verify/* - Third-party verification (public but token-gated)\n- /admin/* - Operational/admin endpoints (admin auth)\n\n## Requirements\n- FastAPI app factory pattern\n- Separate routers for each namespace\n- OpenAPI documentation\n- Request/response validation with Pydantic\n- Error handling middleware\n- CORS configuration\n- Request ID middleware for tracing\n\n## Acceptance\n- API starts and serves requests\n- OpenAPI docs available at /docs\n- Proper error responses\n- Tests for basic routes\n\nRefs: specs/implementation/35-apis.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:36:26.149709+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:06:43.847484132Z","closed_at":"2026-01-22T12:06:43.847484132Z","close_reason":"Closed","labels":["component:api","phase:2-api","priority:critical"],"dependencies":[{"issue_id":"qerds-80v","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T11:36:26.151278+04:00","created_by":"Vincent"},{"issue_id":"qerds-80v","depends_on_id":"qerds-dbc","type":"parent-child","created_at":"2026-01-22T10:10:32.754934739Z","created_by":"ubuntu"}]}
{"id":"qerds-87b","title":"Verify phoss SMP metadata schema compliance for EN 319 522-4-3","description":"Gap 5 from ETSI EN 319 522 compliance audit.\n\nEN 319 522-4-3 specifies OASIS BDXR SMP metadata format. Integration with phoss SMP is documented in spec but implementation status needs verification.\n\nCurrent: phoss SMP selected but integration code not verified in this audit.\n\nRemediation: Verify phoss SMP publishes metadata in correct schema with:\n- Process identifier for QERDS\n- Document type identifiers\n- Endpoint certificate references\n\nPriority: Medium - Required for provider discovery\nCovers: REQ-C04\n\nSee: docs/compliance/etsi-319-522-mapping.md","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:51:00.641300291Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:44:41.925447849Z","closed_at":"2026-01-23T04:44:41.925447849Z","close_reason":"Verified SMP compliance with EN 319 522-4-3 - BDXR format confirmed, added 34 unit tests"}
{"id":"qerds-8rz","title":"Qualified-mode enforcement + fail-closed behavior (REQ-B04)","description":"Implement the platform-level controls needed to support a qualified operational mode (fail-closed) and the evidence labeling/handling needed for eIDAS Article 44(2) presumption.\n\n## Requirements\n- Ensure “qualified mode” has no silent fallback paths (fail closed if qualified prerequisites are missing).\n- Ensure evidence objects and exports clearly reflect qualified vs non-qualified status.\n- Ensure configuration, key storage, and time source requirements are enforced at runtime for qualified mode.\n\n## Acceptance\n- In qualified mode, attempts to seal/timestamp without qualified prerequisites fail closed.\n- In non-qualified/dev mode, evidence is clearly labeled non-qualified.\n- Tests cover mode switches and failure behavior.\n\nRefs: specs/implementation/10-claims-and-modes.md, specs/implementation/45-trust-services.md, specs/implementation/40-evidence-crypto-and-time.md, REQ-B04\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:11.76582+04:00","created_by":"Vincent","updated_at":"2026-01-22T19:01:11.336153127Z","closed_at":"2026-01-22T19:01:11.336153127Z","close_reason":"Closed","labels":["compliance:REQ-B04","component:trust","phase:4-trust","priority:critical"],"dependencies":[{"issue_id":"qerds-8rz","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T12:40:16.995564+04:00","created_by":"Vincent"},{"issue_id":"qerds-8rz","depends_on_id":"qerds-0md","type":"blocks","created_at":"2026-01-18T12:40:17.091889+04:00","created_by":"Vincent"},{"issue_id":"qerds-8rz","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T12:40:17.193151+04:00","created_by":"Vincent"},{"issue_id":"qerds-8rz","depends_on_id":"qerds-0e7","type":"blocks","created_at":"2026-01-18T12:40:17.291429+04:00","created_by":"Vincent"},{"issue_id":"qerds-8rz","depends_on_id":"qerds-uxv","type":"parent-child","created_at":"2026-01-22T10:10:32.783074091Z","created_by":"ubuntu"}]}
{"id":"qerds-8uh","title":"Implement AS4 message receiving integration","description":"Integrate qerds-api with Domibus for receiving deliveries via AS4.\n\n## Features\n- Receive delivery from external QERDS provider\n- Validate message format per ETSI spec\n- Create local delivery record\n- Generate receipt evidence\n- Trigger recipient notification\n\n## Message Processing\n- Validate ETSI EN 319 522-4 compliance\n- Extract content and metadata\n- Create EVT_AS4_RECEIVED event\n\n## Acceptance\n- Messages are received correctly\n- Local delivery is created\n- Evidence is captured\n- Tests verify AS4 compliance\n\nRefs: specs/implementation/65-etsi-interop-profile.md, REQ-C04","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:04.904573+04:00","created_by":"Vincent","updated_at":"2026-01-22T21:06:18.125142831Z","closed_at":"2026-01-22T21:06:18.125142831Z","close_reason":"Closed","labels":["compliance:REQ-C04","component:receiving","phase:10-as4","priority:high"],"dependencies":[{"issue_id":"qerds-8uh","depends_on_id":"qerds-cdg","type":"blocks","created_at":"2026-01-18T11:42:04.907366+04:00","created_by":"Vincent"},{"issue_id":"qerds-8uh","depends_on_id":"qerds-1id","type":"blocks","created_at":"2026-01-18T11:42:04.908475+04:00","created_by":"Vincent"},{"issue_id":"qerds-8uh","depends_on_id":"qerds-e0i","type":"blocks","created_at":"2026-01-18T11:42:04.909288+04:00","created_by":"Vincent"},{"issue_id":"qerds-8uh","depends_on_id":"qerds-9aj","type":"parent-child","created_at":"2026-01-22T10:10:32.810521612Z","created_by":"ubuntu"}]}
{"id":"qerds-8wh","title":"Audit and Compliance","description":"Audit pack export, retention policies, and compliance artifacts","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:10:02.422129698Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.291985459Z","closed_at":"2026-01-23T04:51:38.291985459Z","close_reason":"All child tasks completed","labels":["epic","phase:9-audit"]}
{"id":"qerds-8y3","title":"Audit sender identity proofing flow (REQ-B05)","description":"Verify sender identity proofing meets 'very high confidence' requirement.\n\nTasks:\n1. Review oidc.py FranceConnect+ integration for IAL levels\n2. Verify IAL2/IAL3 is enforced for sender registration\n3. Document supported proofing methods and their assurance levels:\n   - FranceConnect+ (IAL2/IAL3)\n   - eIDAS wallet (future)\n   - Qualified certificate (future)\n   - Manual review process (documented)\n   \n4. Add IAL level to sender party record\n5. Verify IAL is included in evidence events (EVT_DEPOSITED)\n6. Create docs/identity/sender-proofing.md\n\nTest coverage:\n- IAL level captured on registration\n- Low IAL registration rejected (if policy requires high)\n- Evidence includes proofing reference\n\nCovers: REQ-B05, REQ-B03","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:34:12.536168444Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.467743914Z","closed_at":"2026-01-23T03:57:48.467743914Z","close_reason":"Closed","labels":["audit","compliance","identity"]}
{"id":"qerds-9aj","title":"AS4 Interoperability","description":"Domibus AS4 gateway and ETSI interoperability","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:10:03.678122242Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.321078412Z","closed_at":"2026-01-23T04:51:38.321078412Z","close_reason":"All child tasks completed","labels":["epic","phase:10-as4"]}
{"id":"qerds-a2n","title":"Implement evidence event generation","description":"Create the evidence event generation system per specs/implementation/30-lifecycle-and-evidence.md.\n\n## Evidence Event Types\n- EVT_DEPOSITED\n- EVT_NOTIFICATION_SENT\n- EVT_NOTIFICATION_FAILED\n- EVT_AVAILABLE\n- EVT_ACCEPTED\n- EVT_REFUSED\n- EVT_RECEIVED\n- EVT_EXPIRED\n- EVT_CONTENT_ACCESSED\n\n## Event Structure\nEach event must include:\n- event_id (UUID)\n- delivery_id\n- event_type\n- event_time (with trusted time)\n- actor (sender/recipient/system) with identification refs\n- inputs_hashes (content/metadata hashes)\n- policy_snapshot_ref\n\n## Requirements\n- Events are immutable once created\n- Events include all required fields per spec\n- Actor identification tracked\n- Policy snapshot captured at event time\n- Pre-acceptance redaction profile support (REQ-F03)\n\n## Acceptance\n- Events contain all required fields\n- Events are correctly linked to deliveries\n- Tests verify event completeness\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-B01, REQ-B03, REQ-C01","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:37:20.913867+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:35:19.501669125Z","closed_at":"2026-01-22T12:35:19.501669125Z","close_reason":"Closed","labels":["compliance:REQ-B01","compliance:REQ-B03","compliance:REQ-C01","compliance:REQ-F03","component:evidence","phase:3-lifecycle","priority:critical"],"dependencies":[{"issue_id":"qerds-a2n","depends_on_id":"qerds-1id","type":"blocks","created_at":"2026-01-18T11:37:20.915095+04:00","created_by":"Vincent"},{"issue_id":"qerds-a2n","depends_on_id":"qerds-fd0","type":"parent-child","created_at":"2026-01-22T10:10:32.838074459Z","created_by":"ubuntu"}]}
{"id":"qerds-ad1","title":"Implement session management and authentication middleware","description":"Create session management for authenticated users.\n\n## Requirements\n- Secure session tokens\n- Session storage (database-backed)\n- Session expiration\n- Multi-device support\n- Session revocation\n\n## Authentication Flows\n- FranceConnect+ OIDC callback handling\n- API key authentication for machine clients\n- Admin authentication\n\n## Middleware\n- Session validation on protected routes\n- User context injection\n- Auth events logged to security log\n\n## Acceptance\n- Sessions work correctly\n- Expired sessions are rejected\n- Tests cover auth scenarios\n\nRefs: specs/implementation/20-identities-and-roles.md","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:36:29.209581+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:37:19.696043+04:00","labels":["component:auth","phase:2-api","priority:critical"],"deleted_at":"2026-01-18T11:37:19.696043+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-ax1","title":"Write unit tests for delivery lifecycle state machine","description":"Create comprehensive unit tests for the state machine.\n\n## Test Coverage\n- All valid state transitions\n- Invalid transition rejection\n- 15-day window enforcement\n- Evidence event generation on transition\n- Pre-acceptance redaction enforcement\n- Concurrent transition handling\n\n## Requirements\n- 95%+ coverage for state machine code\n- Edge cases covered\n- Tests for all states and transitions\n\n## Acceptance\n- All tests pass\n- Coverage requirement met\n- Edge cases verified\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:43.847749+04:00","created_by":"Vincent","updated_at":"2026-01-22T15:33:14.65136036Z","closed_at":"2026-01-22T15:33:14.65136036Z","close_reason":"Closed","labels":["component:unit-tests","phase:11-testing","priority:critical"],"dependencies":[{"issue_id":"qerds-ax1","depends_on_id":"qerds-pwn","type":"blocks","created_at":"2026-01-18T11:42:43.848976+04:00","created_by":"Vincent"},{"issue_id":"qerds-ax1","depends_on_id":"qerds-1id","type":"blocks","created_at":"2026-01-18T11:42:43.850144+04:00","created_by":"Vincent"},{"issue_id":"qerds-ax1","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:32.866412282Z","created_by":"ubuntu"}]}
{"id":"qerds-axj","title":"Write security tests (auth bypass, injection, etc.)","description":"Create security-focused tests.\n\n## Test Categories\n- Authentication bypass attempts\n- Authorization boundary tests\n- Input validation (SQL injection, XSS)\n- IDOR (Insecure Direct Object Reference)\n- Rate limiting\n- Session security\n\n## Requirements\n- Cover OWASP Top 10\n- Test all input vectors\n- Test role boundaries\n\n## Acceptance\n- No security vulnerabilities found\n- All boundaries enforced\n- Tests are comprehensive\n\nRefs: AGENTS.md (security requirements)","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:44:20.871939+04:00","created_by":"Vincent","updated_at":"2026-01-22T18:51:36.913734591Z","closed_at":"2026-01-22T18:51:36.913734591Z","close_reason":"Closed","labels":["component:security","phase:11-testing","priority:critical"],"dependencies":[{"issue_id":"qerds-axj","depends_on_id":"qerds-pwn","type":"blocks","created_at":"2026-01-18T11:44:20.874116+04:00","created_by":"Vincent"},{"issue_id":"qerds-axj","depends_on_id":"qerds-wla","type":"blocks","created_at":"2026-01-18T11:44:20.875536+04:00","created_by":"Vincent"},{"issue_id":"qerds-axj","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:32.893104693Z","created_by":"ubuntu"}]}
{"id":"qerds-az5","title":"Backend Infrastructure","description":"Core backend services, database schema, and infrastructure components","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:40.368937914Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.055354927Z","closed_at":"2026-01-23T04:51:38.055354927Z","close_reason":"All child tasks completed","labels":["epic","phase:1-backend"]}
{"id":"qerds-b1v","title":"Add webhook alerting for security events (REQ-H04)","description":"Add configurable alerting for security events to support incident detection and response.\n\nImplementation:\n1. Add AlertingConfig to settings (webhook_url, email, enabled event types)\n2. Create AlertingService in src/qerds/services/alerting.py\n3. Hook into security_events.py to trigger alerts\n4. Alert on: auth failures (threshold), permission denials, integrity check failures, config changes\n\nEvents to alert on (configurable):\n- AUTH_FAILURE_THRESHOLD (e.g., 5 in 5 minutes)\n- PERMISSION_DENIED (sensitive resources)\n- AUDIT_CHAIN_BROKEN\n- CONFIG_CHANGED\n- ADMIN_SESSION_CREATED\n\nOutput formats:\n- Webhook (JSON payload with event details)\n- Email (template-based notification)\n\nCovers: REQ-H04, REQ-D08","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:25.766832973Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.484876271Z","closed_at":"2026-01-23T03:57:48.484876271Z","close_reason":"Closed","labels":["feature","security"]}
{"id":"qerds-b9a","title":"Implement i18n infrastructure (French + English)","description":"Set up internationalization for all user-facing content.\n\n## Requirements (per SPEC-J01, SPEC-J02)\n- All UI text externalized\n- French (primary) and English support\n- Email templates in both languages\n- PDF proofs in both languages\n- Error messages translated\n\n## Implementation\n- Use Python gettext or similar\n- Language detection from user preference\n- Language switcher in UI\n- Translation files structure\n\n## Files to Translate\n- Jinja2 templates\n- Email templates\n- PDF proof templates\n- API error messages\n- Form validation messages\n\n## Acceptance\n- All text is externalized\n- French and English complete\n- Language switching works\n- Tests verify translations\n\nRefs: specs/requirements.md (SPEC-J01, SPEC-J02)","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:17.85787+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:35:19.643355659Z","closed_at":"2026-01-22T12:35:19.643355659Z","close_reason":"Closed","labels":["component:i18n","phase:7-frontend","priority:high"],"dependencies":[{"issue_id":"qerds-b9a","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T11:43:17.859998+04:00","created_by":"Vincent"},{"issue_id":"qerds-b9a","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:32.920259357Z","created_by":"ubuntu"}]}
{"id":"qerds-bf1","title":"Implement sender dashboard view","description":"Create the sender dashboard view matching mocks/templates/sender/dashboard.html.\n\n## Features\n- Stats overview (this month, pending, accepted, refused/expired)\n- Recent deliveries grid with delivery cards\n- Quick actions section\n- New delivery button\n\n## Requirements\n- Match mock design exactly\n- Use semantic CSS classes per AGENTS.md\n- Responsive grid layout\n- Empty state when no deliveries\n- i18n support\n\n## Components\n- Stats cards\n- Delivery card partial (with status badges)\n- Action buttons\n\n## Acceptance\n- Dashboard matches mock\n- Data is loaded from API\n- Responsive on mobile\n- Tests verify rendering\n\nRefs: mocks/templates/sender/dashboard.html, mocks/templates/partials/delivery_card.html","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:54.934714+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:13:38.527921416Z","closed_at":"2026-01-22T13:13:38.527921416Z","close_reason":"Closed","labels":["component:sender","phase:7-frontend","priority:high"],"dependencies":[{"issue_id":"qerds-bf1","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T11:39:54.93648+04:00","created_by":"Vincent"},{"issue_id":"qerds-bf1","depends_on_id":"qerds-rt5","type":"blocks","created_at":"2026-01-18T11:39:54.937569+04:00","created_by":"Vincent"},{"issue_id":"qerds-bf1","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:32.948021625Z","created_by":"ubuntu"}]}
{"id":"qerds-bop","title":"Audit i18n string completeness (SPEC-J01/J02)","description":"Verify all user-facing strings are externalized to locale files.\n\nTasks:\n1. Scan all HTML templates for hardcoded strings\n2. Scan all Python code for user-facing strings (error messages, labels)\n3. Compare keys in en.json vs fr.json for parity\n4. Add missing keys to both locales\n5. Update README to mark SPEC-J01/J02 as ✅ when complete\n\nAreas to check:\n- Templates (src/qerds/templates/)\n- Email templates\n- PDF templates\n- Error messages in routers\n- Validation messages\n\nCovers: SPEC-J01, SPEC-J02","status":"closed","priority":3,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:47.837565042Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:53:23.281267048Z","closed_at":"2026-01-23T03:53:23.281267048Z","close_reason":"Closed","labels":["audit","i18n"]}
{"id":"qerds-bpn","title":"Create Alembic migration setup and initial schema","description":"Set up Alembic for database migrations and create the initial PostgreSQL schema.\n\n## Initial Tables (from specs/implementation/25-data-model.md)\n- deliveries (state machine, acceptance_deadline_at, jurisdiction_profile)\n- parties (natural_person, legal_person, identity fields)\n- sender_proofing (IAL levels, proofing evidence)\n- recipient_consents (consent tracking for CPCE)\n- content_objects (encrypted content, integrity binding)\n- evidence_events (lifecycle events with timestamps)\n- evidence_objects (sealed evidence with qualification labels)\n- policy_snapshots (versioned configuration)\n- admin_users, api_clients, roles, role_bindings (RBAC)\n- audit_log_records (tamper-evident stream)\n- retention_policies, retention_actions\n- audit_packs\n- jobs (PostgreSQL-backed job queue)\n\n## Requirements\n- Use SQLAlchemy 2.x ORM models\n- All tables with proper indexes\n- Foreign key constraints\n- Enum types for states\n- UUID primary keys\n- Created/updated timestamps\n\n## Acceptance\n- `alembic upgrade head` creates all tables\n- Models match the data model spec\n- Tests can use the schema\n\nRefs: specs/implementation/25-data-model.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:35:41.632835+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:53:31.885604087Z","closed_at":"2026-01-22T11:53:31.885604087Z","close_reason":"Closed","labels":["component:database","phase:1-backend","priority:critical"],"dependencies":[{"issue_id":"qerds-bpn","depends_on_id":"qerds-az5","type":"parent-child","created_at":"2026-01-22T10:10:32.977295435Z","created_by":"ubuntu"}]}
{"id":"qerds-bul","title":"Document cryptographic mechanisms (REQ-D03)","description":"Create security documentation for cryptographic algorithm choices.\n\nDeliverable: docs/security/cryptographic-mechanisms.md\n\nContents:\n1. Algorithm inventory:\n   - Symmetric: AES-256-GCM (NIST SP 800-38D)\n   - Hash: SHA-256 (FIPS 180-4)\n   - Signing: Ed25519 (RFC 8032)\n   - Key derivation: HKDF (RFC 5869)\n   - Random: secrets module (CSPRNG)\n\n2. Key sizes and parameters:\n   - AES key: 256 bits\n   - GCM nonce: 96 bits (per NIST)\n   - Ed25519: 256-bit keys\n   - HMAC: 256-bit keys\n\n3. References to guidance:\n   - ENISA: Algorithms, Key Sizes and Protocols (latest)\n   - NIST: SP 800-57 (key management)\n   - BSI TR-02102 (German guidance, often referenced)\n\n4. Deprecation policy:\n   - How algorithms will be rotated\n   - Transition period for old keys\n\nCovers: REQ-D03","status":"closed","priority":3,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:34:30.329443573Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.493317291Z","closed_at":"2026-01-23T03:57:48.493317291Z","close_reason":"Closed","labels":["crypto","docs","security"]}
{"id":"qerds-cdg","title":"Set up Domibus AS4 gateway for ETSI interoperability","description":"Configure Domibus as the AS4 Message Service Handler for cross-provider interoperability.\n\n## Requirements (per specs/implementation/65-etsi-interop-profile.md)\n- Deploy Domibus in Docker Compose\n- Configure for QERDS AS4 profile\n- mTLS between qerds-api and Domibus\n- Message routing configuration\n\n## Features\n- Send registered delivery via AS4\n- Receive registered delivery via AS4\n- Evidence exchange\n\n## Configuration\n- AS4 profile per ETSI EN 319 522\n- Endpoint configuration\n- Certificate management\n\n## Acceptance\n- Domibus starts in Docker Compose\n- Basic AS4 connectivity works\n- Tests verify message flow\n\nRefs: specs/implementation/65-etsi-interop-profile.md, REQ-C04","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:46.737445+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:55:03.310948387Z","closed_at":"2026-01-22T20:55:03.310948387Z","close_reason":"Closed","labels":["compliance:REQ-C04","component:gateway","phase:10-as4","priority:high"],"dependencies":[{"issue_id":"qerds-cdg","depends_on_id":"qerds-z6g","type":"blocks","created_at":"2026-01-18T11:41:46.739619+04:00","created_by":"Vincent"},{"issue_id":"qerds-cdg","depends_on_id":"qerds-9aj","type":"parent-child","created_at":"2026-01-22T10:10:33.00597231Z","created_by":"ubuntu"}]}
{"id":"qerds-cln","title":"Integrate qualified TSA and QSCD for production qualification","description":"Gap 4 from ETSI EN 319 522 compliance audit.\n\nBLOCKING FOR QUALIFICATION\n\nCurrent implementation uses non-qualified seals and timestamps (development mode). EN 319 522 and Implementing Regulation 2025/1944 require qualified mechanisms for QERDS status.\n\nCurrent:\nqualification_label: str  # Currently \"non_qualified\"\nqualification_reason: \"Development mode - CEF conformance testing not completed\"\n\nRemediation:\n1. Integrate with qualified TSA (Timestamp Authority)\n2. Use QSCD-generated keys for sealing\n3. Obtain qualification assessment for the provider\n\nAffected files:\n- src/qerds/services/trust.py\n- src/qerds/services/evidence_sealer.py\n\nPriority: BLOCKING - Cannot claim qualified status without this\nCovers: REQ-C04, REQ-D04, REQ-G02\n\nSee: docs/compliance/etsi-319-522-mapping.md","status":"open","priority":1,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:50:53.665466199Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:50:53.665466199Z"}
{"id":"qerds-cze","title":"Implement AS4 message sending integration","description":"Integrate qerds-api with Domibus for sending deliveries via AS4.\n\n## Features\n- Send delivery to external QERDS provider\n- Package content and metadata per ETSI spec\n- Generate evidence for AS4 transmission\n- Handle AS4 receipts\n\n## Message Format\n- ETSI EN 319 522-4 compliant\n- Include all required metadata\n- Content encryption as needed\n\n## Evidence\n- EVT_AS4_SENT event\n- Store transmission evidence\n\n## Acceptance\n- Messages are sent correctly\n- Evidence is captured\n- Tests verify AS4 compliance\n\nRefs: specs/implementation/65-etsi-interop-profile.md, REQ-C04","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:48.11721+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:42:01.493816+04:00","labels":["compliance:REQ-C04","component:sending","phase:10-as4","priority:high"],"deleted_at":"2026-01-18T11:42:01.493816+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-d38","title":"Conformity assessment readiness package (REQ-A02)","description":"Ensure the platform can produce the technical and operational artifacts needed for a QERDS/LRE conformity assessment.\n\n## Requirements\n- Define the minimum “conformity assessment package” contents for MVP.\n- Ensure each required artifact has an owner, generation path, and retention story.\n- Integrate audit pack export with the required artifacts (SBOM/release metadata, policy docs snapshots, evidence samples).\n\n## Acceptance\n- A documented checklist exists mapping artifacts to code paths and storage locations.\n- A sample audit pack can be generated that includes MVP-required artifacts.\n\nRefs: specs/implementation/80-audit-and-conformity.md, REQ-A02\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:38:48.799499+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:38:04.836881643Z","closed_at":"2026-01-22T20:38:04.836881643Z","close_reason":"Closed","labels":["compliance:REQ-A02","component:compliance","phase:9-audit","priority:critical"],"dependencies":[{"issue_id":"qerds-d38","depends_on_id":"qerds-ec1","type":"blocks","created_at":"2026-01-18T12:40:12.554847+04:00","created_by":"Vincent"},{"issue_id":"qerds-d38","depends_on_id":"qerds-7ij","type":"blocks","created_at":"2026-01-18T12:40:12.652209+04:00","created_by":"Vincent"},{"issue_id":"qerds-d38","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T12:40:12.753601+04:00","created_by":"Vincent"},{"issue_id":"qerds-d38","depends_on_id":"qerds-y7u","type":"blocks","created_at":"2026-01-18T12:40:12.856191+04:00","created_by":"Vincent"},{"issue_id":"qerds-d38","depends_on_id":"qerds-xmz","type":"blocks","created_at":"2026-01-18T12:40:12.948936+04:00","created_by":"Vincent"},{"issue_id":"qerds-d38","depends_on_id":"qerds-ogl","type":"blocks","created_at":"2026-01-18T12:40:13.037174+04:00","created_by":"Vincent"},{"issue_id":"qerds-d38","depends_on_id":"qerds-izk","type":"blocks","created_at":"2026-01-18T12:40:13.125844+04:00","created_by":"Vincent"},{"issue_id":"qerds-d38","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:33.034987588Z","created_by":"ubuntu"}]}
{"id":"qerds-dbc","title":"API Layer","description":"FastAPI application structure and endpoint implementations","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:41.483817768Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.087378351Z","closed_at":"2026-01-23T04:51:38.087378351Z","close_reason":"All child tasks completed","labels":["epic","phase:2-api"]}
{"id":"qerds-dco","title":"Create Preuve de Dépôt (Proof of Deposit) PDF template","description":"Create the PDF template for proof of deposit.\n\n## Content (per CPCE/LRE requirements)\n- Provider header with logo\n- Document title: Preuve de Dépôt\n- Delivery reference\n- Sender identity and address\n- Recipient identity and email\n- Subject line\n- Deposit timestamp (from evidence)\n- Content hash/digest\n- Provider seal visualization\n- Timestamp authority info\n- Verification instructions (proof ID + token)\n- QR code for verification URL (optional)\n\n## Generated at EVT_DEPOSITED\n\n## Requirements\n- French language (with i18n structure for English)\n- Legal compliance with CPCE format\n- Include qualification_label (qualified/non-qualified)\n- A4 format\n\n## Acceptance\n- PDF contains all required info\n- Visually professional\n- Verification info is clear\n- Tests verify PDF content\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-F07","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:40:49.085618+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:41:05.025168+04:00","labels":["compliance:REQ-F07","component:proof-templates","phase:8-pdf","priority:critical"],"deleted_at":"2026-01-18T11:41:05.025168+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-dss","title":"Implement consumer consent management for LRE","description":"Create consumer consent tracking for CPCE compliance.\n\n## Requirements (per REQ-F06)\n- Capture consent before initiating LRE to consumers\n- Store consent evidence (who, when, how, what)\n- Consent verification before notification\n- Consent revocation handling\n\n## Database\n- recipient_consents table with:\n  - recipient_party_id\n  - consent_type (fr_lre_electronic_delivery)\n  - consented_at, consented_by\n  - consent_evidence_object_ref\n\n## API\n- POST /recipient/consent - record consent\n- GET /recipient/consent/status - check consent\n- DELETE /recipient/consent - revoke consent\n\n## Flow\n- Check consent before sending LRE notification\n- Block if no consent and recipient is consumer\n\n## Acceptance\n- Consent is tracked correctly\n- Non-consenting consumers blocked\n- Consent evidence stored\n- Tests verify consent flow\n\nRefs: specs/implementation/20-identities-and-roles.md, REQ-F06","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:20.220013+04:00","created_by":"Vincent","updated_at":"2026-01-22T19:26:28.05668262Z","closed_at":"2026-01-22T19:26:28.05668262Z","close_reason":"Closed","labels":["compliance:REQ-F06","component:consent","phase:5-identity","priority:high"],"dependencies":[{"issue_id":"qerds-dss","depends_on_id":"qerds-bpn","type":"blocks","created_at":"2026-01-18T11:43:20.22139+04:00","created_by":"Vincent"},{"issue_id":"qerds-dss","depends_on_id":"qerds-jbl","type":"blocks","created_at":"2026-01-18T11:43:20.222497+04:00","created_by":"Vincent"},{"issue_id":"qerds-dss","depends_on_id":"qerds-m5j","type":"parent-child","created_at":"2026-01-22T10:10:33.063348504Z","created_by":"ubuntu"}]}
{"id":"qerds-dvs","title":"Implement admin dashboard view","description":"Create the admin dashboard matching mocks/templates/admin/dashboard.html.\n\n## View Elements\n- Qualification status indicator (qualified/dev mode)\n- Stats grid (today, month, pending, acceptance rate)\n- Recent activity table with events\n- System health sidebar (API, DB, Trust, Timestamp, Storage)\n- Audit actions sidebar\n\n## Audit Actions\n- Export audit pack\n- Access review\n- Config history\n- Key management\n- Incidents\n\n## Requirements\n- Match mock design exactly\n- Real-time status indicators (green dots)\n- Admin-only access\n- i18n support\n\n## Acceptance\n- Dashboard matches mock\n- System health shows correct status\n- Actions link to correct pages\n- Tests verify admin auth\n\nRefs: mocks/templates/admin/dashboard.html","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:40:30.299387+04:00","created_by":"Vincent","updated_at":"2026-01-23T03:57:48.487969757Z","closed_at":"2026-01-23T03:57:48.487969757Z","close_reason":"Closed","labels":["component:admin","phase:7-frontend","priority:high"],"dependencies":[{"issue_id":"qerds-dvs","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T11:40:30.300441+04:00","created_by":"Vincent"},{"issue_id":"qerds-dvs","depends_on_id":"qerds-j55","type":"blocks","created_at":"2026-01-18T11:40:30.301274+04:00","created_by":"Vincent"},{"issue_id":"qerds-dvs","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:33.091457098Z","created_by":"ubuntu"}]}
{"id":"qerds-e0i","title":"Implement email notification service","description":"Create the email notification service for delivery notifications.\n\n## Notification Types\n- Initial notification to recipient (with magic link)\n- Reminder notifications (if enabled)\n- Notification failure alerts\n\n## CPCE Compliance (REQ-F02)\n- Notification MUST include:\n  - Provider identity\n  - Delivery reference\n  - Legal nature of delivery\n  - Deadline information\n- Notification MUST NOT include:\n  - Sender identity (REQ-F03)\n  - Content preview\n\n## Implementation\n- SMTP configuration (self-hosted or managed)\n- Mailpit for dev/test\n- Template-based emails (i18n ready)\n- Magic link generation with claim tokens\n- Delivery status tracking (sent, delivered, bounced)\n\n## Evidence\n- EVT_NOTIFICATION_SENT with template version, recipient hash, channel, message ID\n\n## Acceptance\n- Emails are sent correctly\n- Templates comply with CPCE\n- Bounces are detected\n- Tests verify notification content\n\nRefs: specs/implementation/05-architecture.md, REQ-C01, REQ-F02, REQ-F03","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:04.70614+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:35:19.613024961Z","closed_at":"2026-01-22T12:35:19.613024961Z","close_reason":"Closed","labels":["compliance:REQ-C01","compliance:REQ-F02","compliance:REQ-F03","component:email","phase:6-notifications","priority:critical"],"dependencies":[{"issue_id":"qerds-e0i","depends_on_id":"qerds-7br","type":"blocks","created_at":"2026-01-18T11:39:04.709098+04:00","created_by":"Vincent"},{"issue_id":"qerds-e0i","depends_on_id":"qerds-1id","type":"blocks","created_at":"2026-01-18T11:39:04.710188+04:00","created_by":"Vincent"},{"issue_id":"qerds-e0i","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T11:39:04.711051+04:00","created_by":"Vincent"},{"issue_id":"qerds-e0i","depends_on_id":"qerds-5jg","type":"parent-child","created_at":"2026-01-22T10:10:33.118418301Z","created_by":"ubuntu"}]}
{"id":"qerds-ec1","title":"Implement audit pack export functionality","description":"Create the audit pack export feature for conformity assessment.\n\n## Audit Pack Contents (per REQ-H01)\n- Evidence samples (configurable range)\n- System configuration snapshots\n- Cryptographic parameters (algorithms, key IDs)\n- Policy documents\n- Release artifacts and SBOM\n\n## API\n- POST /admin/audit-packs - generate pack for date range\n- Returns sealed pack reference stored in object store\n\n## Requirements\n- Pack is sealed and timestamped\n- Format suitable for auditors\n- Include verification instructions\n- Support for evidence sampling\n- Track pack generation in audit log\n\n## Acceptance\n- Audit packs are generated correctly\n- Contents are complete\n- Seal is valid\n- Tests verify pack contents\n\nRefs: specs/implementation/80-audit-and-conformity.md, REQ-H01","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:30.723636+04:00","created_by":"Vincent","updated_at":"2026-01-22T18:52:19.532496067Z","closed_at":"2026-01-22T18:52:19.532496067Z","close_reason":"Closed","labels":["compliance:REQ-H01","component:export","phase:9-audit","priority:high"],"dependencies":[{"issue_id":"qerds-ec1","depends_on_id":"qerds-j55","type":"blocks","created_at":"2026-01-18T11:41:30.725576+04:00","created_by":"Vincent"},{"issue_id":"qerds-ec1","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:41:30.726578+04:00","created_by":"Vincent"},{"issue_id":"qerds-ec1","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:33.146457306Z","created_by":"ubuntu"}]}
{"id":"qerds-esn","title":"Initialize Python backend project structure","description":"Create the foundational Python project structure for qerds-api, qerds-worker, and qerds-trust services.\n\n## Requirements\n- Create src/ directory with proper Python package structure\n- Set up pyproject.toml with all dependencies (FastAPI, SQLAlchemy, Alembic, Authlib, cryptography, WeasyPrint, etc.)\n- Use latest stable versions of all dependencies\n- Configure pytest, ruff, mypy\n- Add .gitignore for Python\n- Create requirements.txt and requirements-dev.txt\n\n## Acceptance\n- `pip install -e .` works\n- Linting and type checking pass\n- Basic test setup works\n\nRefs: specs/implementation/06-tech-stack.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:35:38.72877+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:36:01.560870871Z","closed_at":"2026-01-22T11:36:01.560870871Z","close_reason":"Closed","labels":["component:backend","phase:0-setup","priority:critical"],"dependencies":[{"issue_id":"qerds-esn","depends_on_id":"qerds-znp","type":"parent-child","created_at":"2026-01-22T10:10:33.174096264Z","created_by":"ubuntu"}]}
{"id":"qerds-fd0","title":"Delivery Lifecycle","description":"State machine, evidence generation, and delivery flow management","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:42.461849919Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.115818245Z","closed_at":"2026-01-23T04:51:38.115818245Z","close_reason":"All child tasks completed","labels":["epic","phase:3-lifecycle"]}
{"id":"qerds-fdt","title":"Backend enforcement for all controls (REQ-I02)","description":"Ensure all enforceable compliance/security controls are implemented on the backend (frontend treated as untrusted).\n\n## Requirements\n- Identify controls that must be server-enforced (authn/authz, redaction, acceptance window, consent checks, retention).\n- Add backend-side enforcement points (middleware/services) and ensure no UI-only enforcement exists.\n- Add regression tests that attempt to bypass UI and call APIs directly.\n\n## Acceptance\n- Security/regression tests demonstrate backend enforcement for critical controls.\n- Any UI-only enforcement is removed or mirrored on the backend.\n\nRefs: specs/implementation/05-architecture.md, specs/implementation/90-security-and-ops-controls.md, REQ-I02\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:50.602961+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:06:31.770070913Z","closed_at":"2026-01-22T20:06:31.770070913Z","close_reason":"Closed","labels":["compliance:REQ-I02","component:security","phase:11-testing","priority:critical"],"dependencies":[{"issue_id":"qerds-fdt","depends_on_id":"qerds-32e","type":"blocks","created_at":"2026-01-18T12:40:47.531657+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-4b9","type":"blocks","created_at":"2026-01-18T12:40:47.624149+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-1id","type":"blocks","created_at":"2026-01-18T12:40:47.718742+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-rt5","type":"blocks","created_at":"2026-01-18T12:40:47.810353+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-jbl","type":"blocks","created_at":"2026-01-18T12:40:47.898118+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-dss","type":"blocks","created_at":"2026-01-18T12:40:47.988084+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-7ij","type":"blocks","created_at":"2026-01-18T12:40:48.077219+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-6yi","type":"blocks","created_at":"2026-01-18T12:40:48.167076+04:00","created_by":"Vincent"},{"issue_id":"qerds-fdt","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:33.201764697Z","created_by":"ubuntu"}]}
{"id":"qerds-gol","title":"Integration tests for proof access flows (REQ-F01)","description":"Write integration tests verifying proof access and third-party verification flows.\n\nTest scenarios:\n1. Sender can download deposit proof after deposit\n2. Sender can download all proofs after delivery completion\n3. Recipient can access proofs after acceptance\n4. Recipient can access proofs after refusal\n5. Third-party verification with valid token succeeds\n6. Third-party verification with invalid token fails\n7. Proofs remain accessible after 1 year (retention)\n8. Verification endpoint returns minimal PII (REQ-E03)\n\nImplementation:\n- Add tests/integration/test_proof_access.py\n- Use test client with real database\n- Cover full lifecycle from deposit to proof access\n\nCovers: REQ-F01, REQ-E03","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:49.003631057Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.473623983Z","closed_at":"2026-01-23T03:57:48.473623983Z","close_reason":"Closed","labels":["integration","tests"]}
{"id":"qerds-grm","title":"Implement recipient pickup portal (pre-acceptance view)","description":"Create the recipient pickup view matching mocks/templates/recipient/pickup.html.\n\n## View Elements\n- Hero section with envelope icon\n- Delivery info card with:\n  - REDACTED sender identity (per REQ-F03)\n  - Subject\n  - Deposit date\n  - Expiry deadline (with warning)\n  - Attachment info\n\n## Actions (post-authentication)\n- Accept and download button\n- Refuse button\n\n## Pre-Authentication State\n- Show authentication required warning\n- FranceConnect+ login button\n\n## Requirements\n- Match mock design exactly\n- Sender identity MUST be hidden (critical CPCE compliance)\n- CPCE explanation text\n- i18n support\n\n## Acceptance\n- View matches mock\n- Sender identity is hidden\n- Auth required before actions\n- Tests verify redaction\n\nRefs: mocks/templates/recipient/pickup.html, REQ-F03","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:40:09.852147+04:00","created_by":"Vincent","updated_at":"2026-01-23T04:44:42.75374715Z","closed_at":"2026-01-23T04:44:42.75374715Z","close_reason":"Implemented content download endpoint with encryption, evidence logging, auth wall","labels":["compliance:REQ-F03","component:recipient","phase:7-frontend","priority:critical"],"dependencies":[{"issue_id":"qerds-grm","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T11:40:09.853764+04:00","created_by":"Vincent"},{"issue_id":"qerds-grm","depends_on_id":"qerds-x0y","type":"blocks","created_at":"2026-01-18T11:40:09.854613+04:00","created_by":"Vincent"},{"issue_id":"qerds-grm","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:33.229013847Z","created_by":"ubuntu"}]}
{"id":"qerds-h2b","title":"Fix missing DeliveryMarkerRequest schema in admin.py","description":"The admin router imports DeliveryMarkerRequest from qerds.api.schemas.admin but this class doesn't exist, causing import errors when running tests.\n\nFile: src/qerds/api/routers/admin.py line 47\nImport: from qerds.api.schemas.admin import DeliveryMarkerRequest\n\nThis needs to be either:\n1. Add the DeliveryMarkerRequest schema to admin.py\n2. Remove the import if it's not used\n\nFound during: HSM fail-closed test implementation (qerds-jmd)","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:50:54.348865349Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:02:21.871258849Z","closed_at":"2026-01-23T04:02:21.871258849Z","close_reason":"Already fixed - admin.py uses correct DeploymentMarkerRequest which exists in admin schemas"}
{"id":"qerds-h3s","title":"Implement object store integration (MinIO/S3)","description":"Create the object store integration for content and evidence storage.\n\n## Requirements\n- S3-compatible API (MinIO for dev)\n- Store content objects\n- Store evidence bundles\n- Store audit packs\n- Content-addressed storage where applicable\n\n## Buckets\n- qerds-content: encrypted content blobs\n- qerds-evidence: sealed evidence bundles\n- qerds-audit: audit packs and exports\n\n## Features\n- Upload with integrity verification\n- Download with access control\n- Presigned URLs for direct access (if needed)\n- Retention policy enforcement\n\n## Acceptance\n- Object store integration works\n- Content is stored/retrieved correctly\n- Access control enforced\n- Tests verify all operations\n\nRefs: specs/implementation/05-architecture.md, specs/implementation/70-storage-and-retention.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:23.588501+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:06:43.761161455Z","closed_at":"2026-01-22T12:06:43.761161455Z","close_reason":"Closed","labels":["component:storage","phase:1-backend","priority:critical"],"dependencies":[{"issue_id":"qerds-h3s","depends_on_id":"qerds-z6g","type":"blocks","created_at":"2026-01-18T11:43:23.589793+04:00","created_by":"Vincent"},{"issue_id":"qerds-h3s","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T11:43:23.590783+04:00","created_by":"Vincent"},{"issue_id":"qerds-h3s","depends_on_id":"qerds-az5","type":"parent-child","created_at":"2026-01-22T10:10:33.257684321Z","created_by":"ubuntu"}]}
{"id":"qerds-hsn","title":"Add access review report endpoint (REQ-H06)","description":"Add admin endpoint to export access review reports for periodic compliance reviews.\n\nImplementation:\n1. GET /admin/access-review-report\n2. Returns JSON/CSV with:\n   - All users (id, email, created_at, last_login)\n   - User roles and permissions\n   - Last activity timestamp\n   - MFA status\n   - Account status (active/disabled)\n3. Optional filters: role, last_active_before, created_after\n4. Support CSV export for spreadsheet review\n\nTest coverage:\n- Report includes all user data\n- Filters work correctly\n- CSV export is valid\n\nCovers: REQ-H06, REQ-D02","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:27.950872873Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.479324656Z","closed_at":"2026-01-23T03:57:48.479324656Z","close_reason":"Closed","labels":["admin","compliance","feature"]}
{"id":"qerds-izk","title":"Implement requirement→code/tests traceability (REQ-A04)","description":"Extend the existing requirements traceability so each legal requirement maps to concrete implementation modules and verification artifacts.\n\n## Requirements\n- Keep `specs/traceability.md` as the single traceability source.\n- For each REQ-*, add links to:\n  - Implementation modules (package/module names)\n  - Tests (test modules)\n  - Operational artifacts (audit pack items) when applicable\n- Ensure README status tables reference this mapping.\n\n## Acceptance\n- For each REQ-* in `specs/requirements.md`, there is a traceability entry that includes code + tests once implemented.\n- CI (or a local check) fails if a new REQ-* is added without a traceability entry.\n\nRefs: specs/traceability.md, REQ-A04\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:04.252267+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:36:01.645090521Z","closed_at":"2026-01-22T11:36:01.645090521Z","close_reason":"Closed","labels":["compliance:REQ-A04","component:docs","phase:9-audit","priority:critical"],"dependencies":[{"issue_id":"qerds-izk","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:33.285514065Z","created_by":"ubuntu"}]}
{"id":"qerds-j55","title":"Implement Admin API endpoints","description":"Create the admin-facing API endpoints per specs/implementation/35-apis.md.\n\n## Endpoints\n- POST /admin/audit-packs - generate audit pack for date range\n- GET /admin/deliveries/{id}/timeline - dispute reconstruction\n- POST /admin/config/snapshots - create config snapshot\n- GET /admin/access-reviews/export - export RBAC bindings\n- POST /admin/incidents - create incident record\n- GET /admin/incidents/{id}/export - export incident timeline\n- GET /admin/stats - system statistics\n\n## Requirements\n- Admin authentication required\n- Least privilege enforcement\n- Dual-control for sensitive operations\n- All admin actions logged to security log\n\n## Acceptance\n- All endpoints work correctly\n- Admin auth is enforced\n- Actions are logged\n- Tests cover admin operations\n\nRefs: specs/implementation/35-apis.md, REQ-D02, REQ-H01, REQ-H04, REQ-H05, REQ-H06","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:38:14.476373+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:13:37.101630635Z","closed_at":"2026-01-22T13:13:37.101630635Z","close_reason":"Closed","labels":["compliance:REQ-D02","compliance:REQ-H01","compliance:REQ-H04","compliance:REQ-H05","compliance:REQ-H06","component:admin","phase:2-api","priority:high"],"dependencies":[{"issue_id":"qerds-j55","depends_on_id":"qerds-80v","type":"blocks","created_at":"2026-01-18T11:38:14.477516+04:00","created_by":"Vincent"},{"issue_id":"qerds-j55","depends_on_id":"qerds-4b9","type":"blocks","created_at":"2026-01-18T11:38:14.478294+04:00","created_by":"Vincent"},{"issue_id":"qerds-j55","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T11:38:14.47889+04:00","created_by":"Vincent"},{"issue_id":"qerds-j55","depends_on_id":"qerds-32e","type":"blocks","created_at":"2026-01-18T12:36:52.658552+04:00","created_by":"Vincent"},{"issue_id":"qerds-j55","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T12:36:52.742822+04:00","created_by":"Vincent"},{"issue_id":"qerds-j55","depends_on_id":"qerds-77e","type":"blocks","created_at":"2026-01-18T12:36:52.827941+04:00","created_by":"Vincent"},{"issue_id":"qerds-j55","depends_on_id":"qerds-dbc","type":"parent-child","created_at":"2026-01-22T10:10:33.313352185Z","created_by":"ubuntu"}]}
{"id":"qerds-jbl","title":"Implement Recipient API endpoints","description":"Create the recipient-facing API endpoints per specs/implementation/35-apis.md.\n\n## Endpoints\n- GET /recipient/inbox - list pending deliveries (redacted pre-acceptance)\n- GET /recipient/deliveries/{id} - get delivery info (redacted if pre-acceptance)\n- POST /recipient/deliveries/{id}/accept - accept delivery\n- POST /recipient/deliveries/{id}/refuse - refuse delivery\n- GET /recipient/deliveries/{id}/content - download content (post-acceptance only)\n- GET /recipient/deliveries/{id}/proofs/{type} - download proof PDF\n\n## CPCE Compliance (Critical)\n- PRE-ACCEPTANCE: sender identity MUST be hidden (REQ-F03)\n- POST-ACCEPTANCE: sender identity revealed\n- Acceptance window enforcement (15 days, REQ-F04)\n- Consumer consent verification (REQ-F06)\n\n## Requirements\n- Authentication required via FranceConnect+ (IAL_SUBSTANTIAL min for LRE)\n- Redaction profile enforcement\n- State machine enforcement\n- Evidence events on accept/refuse\n- Content access gating (REQ-E02)\n\n## Acceptance\n- All endpoints work correctly\n- Sender identity hidden pre-acceptance\n- Tests verify CPCE compliance\n\nRefs: specs/implementation/35-apis.md, REQ-F03, REQ-F04, REQ-E02","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:38:13.063983+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:01:49.143628603Z","closed_at":"2026-01-22T13:01:49.143628603Z","close_reason":"Closed","labels":["compliance:REQ-E02","compliance:REQ-F03","compliance:REQ-F04","compliance:REQ-F06","component:recipient","phase:2-api","priority:critical"],"dependencies":[{"issue_id":"qerds-jbl","depends_on_id":"qerds-80v","type":"blocks","created_at":"2026-01-18T11:38:13.065183+04:00","created_by":"Vincent"},{"issue_id":"qerds-jbl","depends_on_id":"qerds-32e","type":"blocks","created_at":"2026-01-18T11:38:13.066027+04:00","created_by":"Vincent"},{"issue_id":"qerds-jbl","depends_on_id":"qerds-1id","type":"blocks","created_at":"2026-01-18T11:38:13.06681+04:00","created_by":"Vincent"},{"issue_id":"qerds-jbl","depends_on_id":"qerds-juv","type":"blocks","created_at":"2026-01-18T12:36:52.916041+04:00","created_by":"Vincent"},{"issue_id":"qerds-jbl","depends_on_id":"qerds-dbc","type":"parent-child","created_at":"2026-01-22T10:10:33.340418223Z","created_by":"ubuntu"}]}
{"id":"qerds-jfk","title":"Create qualification guidance document (REQ-A01)","description":"Create docs/compliance/qualification-guide.md explaining what a provider needs to do to become qualified.\n\nContents:\n1. What is QERDS qualification?\n   - eIDAS Article 44 overview\n   - Qualified vs non-qualified distinction\n   - Legal implications of qualification\n\n2. Prerequisites for qualification\n   - Provider organizational requirements\n   - Trust service provider status\n   - Conformity assessment body selection\n\n3. Qualification process overview\n   - Initial conformity assessment\n   - Supervision regime\n   - Trusted list inclusion\n   - Ongoing obligations\n\n4. Platform support\n   - How QERDS platform supports qualification\n   - What the platform provides vs what provider must do\n   - Configuration for qualified operation\n\n5. France LRE specifics\n   - CPCE requirements additional to eIDAS\n   - ARCEP notification (if applicable)\n\nReferences:\n- eIDAS Regulation 910/2014\n- Implementing Regulation 2025/1944\n- specs/requirements.md\n\nCovers: REQ-A01, REQ-G01","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:36:52.589010993Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.464834142Z","closed_at":"2026-01-23T03:57:48.464834142Z","close_reason":"Closed","labels":["compliance","docs"]}
{"id":"qerds-jmd","title":"Test HSM fail-closed behavior (REQ-D04)","description":"Verify that qualified mode fails closed when HSM prerequisites are not met.\n\nTest scenarios:\n1. Qualified mode without HSM config → signing operation fails\n2. Qualified mode with HSM unreachable → signing operation fails\n3. Qualified mode with valid HSM → signing succeeds\n4. Non-qualified mode without HSM → signing succeeds (labeled non-qualified)\n5. Mode transition requires restart (no hot switching to qualified)\n\nImplementation:\n- Add tests/integration/test_hsm_failclosed.py\n- Mock HSM availability scenarios\n- Verify error messages are clear about what's missing\n\nAlso verify:\n- qualified_mode.py prerequisite checks work\n- trust.py respects mode constraints\n- Evidence is labeled correctly in each scenario\n\nCovers: REQ-D04, REQ-G02","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:34:31.287965796Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:52:01.554681696Z","closed_at":"2026-01-23T03:52:01.554681696Z","close_reason":"Closed","labels":["hsm","security","tests"]}
{"id":"qerds-jp9","title":"Create Preuve de Négligence (Proof of Non-Claim) PDF template","description":"Create the PDF template for proof of non-claim/expiry.\n\n## Content\n- Provider header with logo\n- Document title: Preuve de Négligence\n- Delivery reference\n- Sender identity\n- Recipient identity (revealed after expiry)\n- Subject line\n- Deposit timestamp\n- Notification timestamp\n- Expiry timestamp (15 days after notification)\n- Provider seal visualization\n- Verification instructions\n\n## Generated at EVT_EXPIRED\n\n## Requirements\n- French language (with i18n)\n- Clear indication that 15-day window elapsed\n- A4 format\n\n## Acceptance\n- PDF contains all required info\n- Timeline is clear\n- Tests verify content\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md, REQ-F07, REQ-F04","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:41:11.876971+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:13:37.021141993Z","closed_at":"2026-01-22T13:13:37.021141993Z","close_reason":"Closed","labels":["compliance:REQ-F07","component:proof-templates","phase:8-pdf","priority:high"],"dependencies":[{"issue_id":"qerds-jp9","depends_on_id":"qerds-4q6","type":"blocks","created_at":"2026-01-18T11:41:11.878198+04:00","created_by":"Vincent"},{"issue_id":"qerds-jp9","depends_on_id":"qerds-24b","type":"blocks","created_at":"2026-01-18T11:41:11.879107+04:00","created_by":"Vincent"},{"issue_id":"qerds-jp9","depends_on_id":"qerds-7of","type":"parent-child","created_at":"2026-01-22T10:10:33.370169294Z","created_by":"ubuntu"}]}
{"id":"qerds-juv","title":"Implement FranceConnect+ OIDC integration","description":"Integrate FranceConnect+ for identity verification using Authlib.\n\n## Requirements\n- OIDC client configuration for FranceConnect+\n- ACR claim mapping to IAL levels:\n  - eidas2 -\u003e IAL_SUBSTANTIAL\n  - eidas3 -\u003e IAL_HIGH\n- Identity claims extraction (given_name, family_name, email, etc.)\n- Session binding after successful auth\n- Redirect flow handling\n\n## Flows\n- Sender identity verification\n- Recipient authentication for pickup (CPCE requires IAL_SUBSTANTIAL)\n- Admin authentication\n\n## Implementation\n- Use Authlib for OIDC client\n- Store identity proofing evidence\n- Create EVT_IDENTITY_VERIFIED events when applicable\n\n## Acceptance\n- OIDC flow works correctly\n- IAL levels are correctly determined\n- Identity claims are captured\n- Tests cover auth flows (with mocked FC+)\n\nRefs: specs/implementation/20-identities-and-roles.md, REQ-B05","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:38:37.596568+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:49:24.61934287Z","closed_at":"2026-01-22T12:49:24.61934287Z","close_reason":"Closed","labels":["compliance:REQ-B05","component:auth","phase:5-identity","priority:critical"],"dependencies":[{"issue_id":"qerds-juv","depends_on_id":"qerds-32e","type":"blocks","created_at":"2026-01-18T11:38:37.597715+04:00","created_by":"Vincent"},{"issue_id":"qerds-juv","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T11:38:37.598565+04:00","created_by":"Vincent"},{"issue_id":"qerds-juv","depends_on_id":"qerds-m5j","type":"parent-child","created_at":"2026-01-22T10:10:33.398249696Z","created_by":"ubuntu"}]}
{"id":"qerds-k4x","title":"Implement configuration management system","description":"Create a centralized configuration management system for all services.\n\n## Requirements\n- Environment-based configuration (dev, staging, production)\n- Support for claim_state (qualified/non_qualified) per REQ-G01, REQ-G02\n- Database connection settings\n- S3/MinIO settings\n- SMTP settings\n- FranceConnect+ OIDC settings\n- Trust service settings\n- Crypto algorithm configuration (versioned)\n- Policy snapshot creation on config changes\n\n## Implementation\n- Pydantic Settings for validation\n- Support for .env files in development\n- Secrets management (environment variables)\n- Config versioning for audit (REQ-H05)\n\n## Acceptance\n- Configuration loads correctly in all environments\n- Invalid config fails fast with clear errors\n- Config changes create policy snapshots\n\nRefs: specs/implementation/05-architecture.md, REQ-G01, REQ-G02, REQ-H05","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:36:03.695369+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:53:31.94325947Z","closed_at":"2026-01-22T11:53:31.94325947Z","close_reason":"Closed","labels":["compliance:REQ-G01","compliance:REQ-G02","compliance:REQ-H05","component:config","phase:1-backend","priority:critical"],"dependencies":[{"issue_id":"qerds-k4x","depends_on_id":"qerds-esn","type":"blocks","created_at":"2026-01-18T11:36:03.69728+04:00","created_by":"Vincent"},{"issue_id":"qerds-k4x","depends_on_id":"qerds-az5","type":"parent-child","created_at":"2026-01-22T10:10:33.427028783Z","created_by":"ubuntu"}]}
{"id":"qerds-lrp","title":"Implement AS4 message sending integration","description":"Integrate qerds-api with Domibus for sending deliveries via AS4.\n\n## Features\n- Send delivery to external QERDS provider\n- Package content and metadata per ETSI spec\n- Generate evidence for AS4 transmission\n- Handle AS4 receipts\n\n## Message Format\n- ETSI EN 319 522-4 compliant\n- Include all required metadata\n- Content encryption as needed\n\n## Evidence\n- EVT_AS4_SENT event\n- Store transmission evidence\n\n## Acceptance\n- Messages are sent correctly\n- Evidence is captured\n- Tests verify AS4 compliance\n\nRefs: specs/implementation/65-etsi-interop-profile.md, REQ-C04","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:03.045365+04:00","created_by":"Vincent","updated_at":"2026-01-22T21:06:18.077768523Z","closed_at":"2026-01-22T21:06:18.077768523Z","close_reason":"Closed","labels":["compliance:REQ-C04","component:sending","phase:10-as4","priority:high"],"dependencies":[{"issue_id":"qerds-lrp","depends_on_id":"qerds-cdg","type":"blocks","created_at":"2026-01-18T11:42:03.047289+04:00","created_by":"Vincent"},{"issue_id":"qerds-lrp","depends_on_id":"qerds-rt5","type":"blocks","created_at":"2026-01-18T11:42:03.048238+04:00","created_by":"Vincent"},{"issue_id":"qerds-lrp","depends_on_id":"qerds-9aj","type":"parent-child","created_at":"2026-01-22T10:10:33.454964886Z","created_by":"ubuntu"}]}
{"id":"qerds-m5j","title":"Identity and Authentication","description":"FranceConnect+ integration, consent management, and authentication flows","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:51.328594284Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.173417115Z","closed_at":"2026-01-23T04:51:38.173417115Z","close_reason":"All child tasks completed","labels":["epic","phase:5-identity"]}
{"id":"qerds-mdj","title":"Create security management operations guide (REQ-D01)","description":"Create docs/operations/security-management.md explaining how to operate an ISMS with the QERDS platform.\n\nContents:\n1. Information Security Management System (ISMS)\n   - What is ISMS\n   - ETSI EN 319 401 alignment\n   - Role of the platform vs organizational processes\n\n2. Security roles and responsibilities\n   - Security officer responsibilities\n   - Administrator responsibilities\n   - Operator responsibilities\n   - Segregation of duties\n\n3. Risk assessment\n   - Asset inventory\n   - Threat identification\n   - Risk evaluation\n   - Risk treatment\n\n4. Security controls provided by platform\n   - Access control (src/qerds/services/authz.py)\n   - Audit logging (src/qerds/services/audit_log.py)\n   - Encryption (src/qerds/services/encryption.py)\n   - Security events (src/qerds/services/security_events.py)\n\n5. Operational security procedures\n   - Change management\n   - Incident response\n   - Backup and recovery\n   - Access reviews\n\n6. Monitoring and review\n   - Security event monitoring\n   - Log review procedures\n   - Periodic control reviews\n   - Management reviews\n\n7. Documentation requirements\n   - Policy documents\n   - Procedures\n   - Records\n   - Evidence retention\n\nReferences:\n- ETSI EN 319 401\n- ETSI EN 319 521\n- ISO 27001 (informative)\n\nCovers: REQ-D01, REQ-D02","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:37:14.165045913Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.441383619Z","closed_at":"2026-01-23T03:57:48.441383619Z","close_reason":"Closed","labels":["docs","operations","security"]}
{"id":"qerds-n06","title":"Update README requirement status table","description":"Audit actual implementation against README status table and update all ✅/❌ markers to reflect true state.\n\nTasks:\n1. Review each REQ-* and SPEC-* against codebase\n2. Update status (✅/❌/N/A) with code path references\n3. Mark operational requirements (REQ-A01, A02, D05, D06, D07) as N/A with explanation\n4. Ensure README stays in sync with specs/requirements.md\n\nCovers: REQ-A04 traceability","status":"closed","priority":1,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:05.645474588Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:01:47.793176358Z","closed_at":"2026-01-23T04:01:47.793176358Z","close_reason":"Updated README requirement status table - all implemented requirements now marked ✅ with code paths and test references","labels":["compliance","docs"]}
{"id":"qerds-ogl","title":"Create CPS/policies skeleton for audits (REQ-A03)","description":"Create the documentation skeleton and repository locations for the provider policies and CPS artifacts required for audits.\n\n## Requirements\n- Define where security policy, incident policy, continuity/DR policy, key management policy, evidence management policy, and privacy policy live in-repo.\n- Ensure the content references implementation modules (don’t duplicate schemas/behavior).\n- Define which parts are intended to be published to relying parties.\n\n## Acceptance\n- Policy/CPS skeleton exists with clear placeholders and links to code/specs.\n- Documented process for keeping policies in sync with releases.\n\nRefs: specs/implementation/80-audit-and-conformity.md, specs/implementation/05-architecture.md, REQ-A03\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:38:55.630912+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:36:01.618412669Z","closed_at":"2026-01-22T11:36:01.618412669Z","close_reason":"Closed","labels":["compliance:REQ-A03","component:docs","phase:9-audit","priority:high"],"dependencies":[{"issue_id":"qerds-ogl","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:33.482207734Z","created_by":"ubuntu"}]}
{"id":"qerds-omt","title":"Fix recipient integration tests for content download endpoint","description":"The tests in tests/test_recipient_integration.py for TestContentAccessControl (test_content_download_denied_before_accept, test_content_download_denied_after_refuse) fail because they use patch() instead of FastAPI's app.dependency_overrides mechanism.\n\nThe tests were written for a stub endpoint returning 501 and now that the endpoint is implemented, they need updating to use proper dependency overrides.\n\nAffected tests:\n- test_content_download_denied_before_accept\n- test_content_download_denied_after_refuse\n\nSee tests/test_sender_api.py for the correct pattern using app.dependency_overrides.","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T04:42:25.284855456Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:48:16.16771994Z","closed_at":"2026-01-23T04:48:16.16771994Z","close_reason":"Fixed tests to use FastAPI dependency overrides instead of patch()"}
{"id":"qerds-pwn","title":"Set up testing infrastructure (pytest, fixtures, Docker)","description":"Create the testing infrastructure for the project.\n\n## Requirements\n- pytest configuration\n- pytest-asyncio for async tests\n- pytest-cov for coverage\n- Test fixtures for database, object store\n- Docker Compose for test environment\n- CI-compatible test runner\n\n## Fixtures\n- Database session (with rollback)\n- Test user (sender, recipient, admin)\n- Mock FranceConnect+ responses\n- Test delivery factory\n- Object store mock\n\n## Commands\n- `make test` - run all tests\n- `make test-cov` - run with coverage report\n- Tests must run in Docker for reproducibility\n\n## Acceptance\n- pytest runs successfully\n- Fixtures work correctly\n- Coverage report generates\n- Tests isolated (no cross-test pollution)\n\nRefs: AGENTS.md (test coverage requirements)","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:19.981818+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:53:31.97684894Z","closed_at":"2026-01-22T11:53:31.97684894Z","close_reason":"Closed","labels":["component:infrastructure","phase:11-testing","priority:critical"],"dependencies":[{"issue_id":"qerds-pwn","depends_on_id":"qerds-esn","type":"blocks","created_at":"2026-01-18T11:42:19.983901+04:00","created_by":"Vincent"},{"issue_id":"qerds-pwn","depends_on_id":"qerds-z6g","type":"blocks","created_at":"2026-01-18T11:42:19.984871+04:00","created_by":"Vincent"},{"issue_id":"qerds-pwn","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:33.532724191Z","created_by":"ubuntu"}]}
{"id":"qerds-q2z","title":"Add config change logging (REQ-H05)","description":"Log configuration changes to audit trail for change management compliance.\n\nImplementation:\n1. Add ConfigChangeEvent model/schema\n2. Hook config updates to log to audit_log (operations stream)\n3. Include: actor, timestamp, setting key, old value (redacted if sensitive), new value (redacted if sensitive)\n4. Add POST /admin/deployment-marker endpoint for CI/CD to call on deploy\n5. Deployment marker logs: version, git SHA, timestamp, deployer\n\nTest coverage:\n- Config change creates audit record\n- Deployment marker creates audit record\n- Sensitive values are redacted in logs\n\nCovers: REQ-H05","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:26.808470476Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.482166091Z","closed_at":"2026-01-23T03:57:48.482166091Z","close_reason":"Closed","labels":["compliance","feature"]}
{"id":"qerds-qqj","title":"Create recipient refused view and inbox","description":"Create the recipient refused confirmation view and inbox list.\n\n## Refused View\n- Similar to accepted view but with refusal confirmation\n- Show sender identity (now revealed)\n- Proof of refusal download\n\n## Inbox View\n- List of pending deliveries\n- Status indicators\n- Filter options\n\n## Requirements\n- Match overall design language\n- Responsive design\n- i18n support\n\n## Acceptance\n- Views match design\n- Sender revealed after refusal\n- Tests verify rendering\n\nRefs: mocks/templates/recipient/ (base on accepted.html style)","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:47.980708+04:00","created_by":"Vincent","updated_at":"2026-01-22T15:33:26.210322196Z","closed_at":"2026-01-22T15:33:26.210322196Z","close_reason":"Closed","labels":["component:recipient","phase:7-frontend","priority:medium"],"dependencies":[{"issue_id":"qerds-qqj","depends_on_id":"qerds-1z7","type":"blocks","created_at":"2026-01-18T11:43:47.982402+04:00","created_by":"Vincent"},{"issue_id":"qerds-qqj","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:33.56472429Z","created_by":"ubuntu"}]}
{"id":"qerds-rhd","title":"Implement recipient pickup flow with authentication wall","description":"Create the recipient pickup flow with mandatory authentication.\n\n## Flow (per specs/implementation/05-architecture.md)\n1. Recipient receives email with magic link (claim token)\n2. Link redirects to pickup portal (no content access yet!)\n3. Recipient MUST authenticate via FranceConnect+\n4. After auth (IAL_SUBSTANTIAL+), recipient can:\n   - View delivery info (sender still hidden)\n   - Accept or Refuse\n5. After accept/refuse, sender identity revealed\n6. After accept, content download enabled\n\n## Requirements\n- Magic link is NOT direct content access\n- Authentication required before any action\n- IAL level enforcement for LRE mode\n- Consumer consent check (REQ-F06)\n- Evidence events on all actions\n\n## Acceptance\n- Flow works end-to-end\n- Unauthenticated users cannot access content\n- Sender identity hidden until accept/refuse\n- Tests cover complete flow\n\nRefs: specs/implementation/20-identities-and-roles.md, REQ-E02, REQ-F03","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:38:39.103977+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:38:47.160439+04:00","labels":["compliance:REQ-E02","component:recipient","phase:5-identity","priority:critical"],"deleted_at":"2026-01-18T11:38:47.160439+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-rpc","title":"Security management controls + evidence (REQ-D01)","description":"Define and implement the minimum security-management controls the platform must enforce/provide evidence for (ISMS-aligned, but MVP-scoped).\n\n## Requirements\n- Define security control objectives the platform enforces (authn/authz, logging, retention, change tracking).\n- Define operator obligations the platform must support with evidence (audit packs, logs, exports).\n- Ensure admin roles and workflows support separation of duties.\n\n## Acceptance\n- A documented security control set exists with links to the implementing modules.\n- Evidence for key security controls is exportable (logs/exports).\n\nRefs: specs/implementation/90-security-and-ops-controls.md, REQ-D01\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:17.810796+04:00","created_by":"Vincent","updated_at":"2026-01-22T19:26:37.662823416Z","closed_at":"2026-01-22T19:26:37.662823416Z","close_reason":"Closed","labels":["compliance:REQ-D01","component:security","phase:9-audit","priority:critical"],"dependencies":[{"issue_id":"qerds-rpc","depends_on_id":"qerds-4b9","type":"blocks","created_at":"2026-01-18T12:40:21.449167+04:00","created_by":"Vincent"},{"issue_id":"qerds-rpc","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T12:40:21.536996+04:00","created_by":"Vincent"},{"issue_id":"qerds-rpc","depends_on_id":"qerds-77e","type":"blocks","created_at":"2026-01-18T12:40:21.623519+04:00","created_by":"Vincent"},{"issue_id":"qerds-rpc","depends_on_id":"qerds-k4x","type":"blocks","created_at":"2026-01-18T12:40:21.712262+04:00","created_by":"Vincent"},{"issue_id":"qerds-rpc","depends_on_id":"qerds-j55","type":"blocks","created_at":"2026-01-18T12:40:21.798935+04:00","created_by":"Vincent"},{"issue_id":"qerds-rpc","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:33.594218782Z","created_by":"ubuntu"}]}
{"id":"qerds-rt5","title":"Implement Sender API endpoints","description":"Create the sender-facing API endpoints per specs/implementation/35-apis.md.\n\n## Endpoints\n- POST /sender/deliveries - create draft delivery\n- POST /sender/deliveries/{id}/content - upload content object\n- POST /sender/deliveries/{id}/deposit - transition to deposited\n- GET /sender/deliveries - list sender's deliveries\n- GET /sender/deliveries/{id} - get delivery details\n- GET /sender/deliveries/{id}/proofs - list available proofs\n- GET /sender/deliveries/{id}/proofs/{type} - download proof PDF\n\n## Requirements\n- Authentication required (sender_user role)\n- Input validation (Pydantic schemas)\n- Content upload to object store (S3/MinIO)\n- Content integrity binding (SHA-256)\n- State machine enforcement\n- Evidence event generation on deposit\n- Sender identity verification tracking (IAL level)\n\n## Acceptance\n- All endpoints work correctly\n- Authentication is enforced\n- State machine prevents invalid operations\n- Tests cover all endpoints\n\nRefs: specs/implementation/35-apis.md, REQ-B01, REQ-B02, REQ-B05","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:38:11.922065+04:00","created_by":"Vincent","updated_at":"2026-01-22T13:01:49.097330541Z","closed_at":"2026-01-22T13:01:49.097330541Z","close_reason":"Closed","labels":["compliance:REQ-B01","compliance:REQ-B02","compliance:REQ-B05","component:sender","phase:2-api","priority:critical"],"dependencies":[{"issue_id":"qerds-rt5","depends_on_id":"qerds-80v","type":"blocks","created_at":"2026-01-18T11:38:11.924021+04:00","created_by":"Vincent"},{"issue_id":"qerds-rt5","depends_on_id":"qerds-32e","type":"blocks","created_at":"2026-01-18T11:38:11.924857+04:00","created_by":"Vincent"},{"issue_id":"qerds-rt5","depends_on_id":"qerds-1id","type":"blocks","created_at":"2026-01-18T11:38:11.925467+04:00","created_by":"Vincent"},{"issue_id":"qerds-rt5","depends_on_id":"qerds-h3s","type":"blocks","created_at":"2026-01-18T12:36:53.003826+04:00","created_by":"Vincent"},{"issue_id":"qerds-rt5","depends_on_id":"qerds-juv","type":"blocks","created_at":"2026-01-18T12:36:53.091991+04:00","created_by":"Vincent"},{"issue_id":"qerds-rt5","depends_on_id":"qerds-dbc","type":"parent-child","created_at":"2026-01-22T10:10:33.621357777Z","created_by":"ubuntu"}]}
{"id":"qerds-s0k","title":"Write unit tests for delivery lifecycle state machine","description":"Create comprehensive unit tests for the state machine.\n\n## Test Coverage\n- All valid state transitions\n- Invalid transition rejection\n- 15-day window enforcement\n- Evidence event generation on transition\n- Pre-acceptance redaction enforcement\n- Concurrent transition handling\n\n## Requirements\n- 95%+ coverage for state machine code\n- Edge cases covered\n- Tests for all states and transitions\n\n## Acceptance\n- All tests pass\n- Coverage requirement met\n- Edge cases verified\n\nRefs: specs/implementation/30-lifecycle-and-evidence.md","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:21.524632+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:42:42.156411+04:00","labels":["component:unit-tests","phase:11-testing","priority:critical"],"deleted_at":"2026-01-18T11:42:42.156411+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-s5z","title":"Implement tamper-evident audit logging infrastructure","description":"Create the tamper-evident audit logging system per REQ-C05, REQ-D08, REQ-H03.\n\n## Log Streams Required\n- Evidence log: evidence objects and verification bundles\n- Security log: auth/authz events, admin actions, key operations\n- Operations log: deployments, config changes, backups\n\n## Tamper-Evidence Features\n- Hash-chain construction (prev_record_hash)\n- Periodic sealed/timestamped checkpoints\n- Verification tooling for integrity checks\n- Detection of deletion/reordering\n\n## Database Tables\n- audit_log_records with stream, seq_no, record_hash, prev_record_hash\n\n## Requirements\n- Append-only structure\n- Support for redaction in exports\n- RBAC for log access\n\n## Acceptance\n- Logs are tamper-evident\n- Verification detects tampering\n- Tests cover integrity scenarios\n\nRefs: specs/implementation/50-audit-logging-and-immutability.md, REQ-C05, REQ-D08, REQ-H03","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:36:05.494657+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:06:43.790525378Z","closed_at":"2026-01-22T12:06:43.790525378Z","close_reason":"Closed","labels":["compliance:REQ-C05","compliance:REQ-D08","compliance:REQ-H03","component:audit","phase:1-backend","priority:critical"],"dependencies":[{"issue_id":"qerds-s5z","depends_on_id":"qerds-bpn","type":"blocks","created_at":"2026-01-18T11:36:05.495685+04:00","created_by":"Vincent"},{"issue_id":"qerds-s5z","depends_on_id":"qerds-az5","type":"parent-child","created_at":"2026-01-22T10:10:33.649042621Z","created_by":"ubuntu"}]}
{"id":"qerds-s8x","title":"Network filtering / default-deny deployment posture (REQ-D07)","description":"Define and implement default-deny network filtering and service exposure boundaries for dev and production-like deployments.\n\n## Requirements\n- Document intended network topology and exposed ports.\n- Ensure `docker compose` exposes only what’s required.\n- Provide an operator checklist for firewalling/reverse proxy hardening.\n\n## Acceptance\n- Compose and docs demonstrate a default-deny posture (only required ports exposed).\n- A quick validation script/checklist exists for production deployments.\n\nRefs: specs/implementation/90-security-and-ops-controls.md, specs/implementation/05-architecture.md, REQ-D07\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:24.306005+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:53:32.007989018Z","closed_at":"2026-01-22T11:53:32.007989018Z","close_reason":"Closed","labels":["compliance:REQ-D07","component:devops","phase:0-setup","priority:high"],"dependencies":[{"issue_id":"qerds-s8x","depends_on_id":"qerds-z6g","type":"blocks","created_at":"2026-01-18T12:40:24.911728+04:00","created_by":"Vincent"},{"issue_id":"qerds-s8x","depends_on_id":"qerds-znp","type":"parent-child","created_at":"2026-01-22T10:10:33.676769813Z","created_by":"ubuntu"}]}
{"id":"qerds-twr","title":"Create sender history and delivery detail views","description":"Create the sender history page and delivery detail view.\n\n## History View\n- Filterable/searchable list of all deliveries\n- Status filters (all, pending, completed, expired)\n- Date range filter\n- Pagination\n\n## Detail View\n- Full delivery information\n- Timeline of events\n- Available proofs with download links\n- Resend notification action (if applicable)\n\n## Requirements\n- Match overall design language\n- Responsive design\n- i18n support\n\n## Acceptance\n- Views match design\n- Filtering works\n- Downloads work\n- Tests verify rendering\n\nRefs: mocks/ (no specific mock, but consistent with dashboard style)","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:46.586106+04:00","created_by":"Vincent","updated_at":"2026-01-22T15:33:14.772617489Z","closed_at":"2026-01-22T15:33:14.772617489Z","close_reason":"Closed","labels":["component:sender","phase:7-frontend","priority:medium"],"dependencies":[{"issue_id":"qerds-twr","depends_on_id":"qerds-bf1","type":"blocks","created_at":"2026-01-18T11:43:46.587198+04:00","created_by":"Vincent"},{"issue_id":"qerds-twr","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:33.704009135Z","created_by":"ubuntu"}]}
{"id":"qerds-ukg","title":"Add actor_id_type field to ActorIdentification for EN 319 522 compliance","description":"Gap 1 from ETSI EN 319 522 compliance audit.\n\nEN 319 522-4-2 requires structured party identification with explicit identification scheme URIs.\n\nCurrent implementation uses actor_ref as a simple string reference. Need to add actor_id_type field to capture the identification scheme URI (e.g., urn:oasis:names:tc:ebcore:partyid-type:iso6523:0088).\n\nAffected files:\n- src/qerds/services/evidence.py (ActorIdentification)\n- src/qerds/db/models/evidence.py (EvidenceEvent)\n\nPriority: Medium - Required for cross-provider interoperability\nCovers: REQ-C04\n\nSee: docs/compliance/etsi-319-522-mapping.md","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:50:26.654902438Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:03:23.4847443Z","closed_at":"2026-01-23T04:03:23.4847443Z","close_reason":"Added actor_id_type field to ActorIdentification in evidence.py for EN 319 522-4-2 compliance. Field stored in event_metadata JSONB."}
{"id":"qerds-uxv","title":"Trust Services","description":"Cryptographic signing, timestamping, and evidence sealing","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:50.049197209Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.144379806Z","closed_at":"2026-01-23T04:51:38.144379806Z","close_reason":"All child tasks completed","labels":["epic","phase:4-trust"]}
{"id":"qerds-vzi","title":"Implement verification portal view","description":"Create the verification portal matching mocks/templates/verify.html.\n\n## View Elements\n- Verification form (proof ID + token)\n- Result display (valid/invalid)\n- Detail grid showing:\n  - Proof type\n  - Issue date\n  - Delivery reference\n  - Parties (redacted if pre-acceptance)\n  - Signature algorithm\n  - Timestamp authority\n  - Document hash\n- Help section with steps\n\n## Requirements\n- Match mock design exactly\n- Public access (no auth required)\n- Token-gated API calls\n- i18n support\n\n## Acceptance\n- View matches mock\n- Verification works correctly\n- Pre-acceptance redaction enforced\n- Tests verify all states\n\nRefs: mocks/templates/verify.html, REQ-F01","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:40:31.499085+04:00","created_by":"Vincent","updated_at":"2026-01-22T15:33:14.714720195Z","closed_at":"2026-01-22T15:33:14.714720195Z","close_reason":"Closed","labels":["compliance:REQ-F01","component:verify","phase:7-frontend","priority:high"],"dependencies":[{"issue_id":"qerds-vzi","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T11:40:31.501033+04:00","created_by":"Vincent"},{"issue_id":"qerds-vzi","depends_on_id":"qerds-6yi","type":"blocks","created_at":"2026-01-18T11:40:31.501904+04:00","created_by":"Vincent"},{"issue_id":"qerds-vzi","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:33.73228899Z","created_by":"ubuntu"}]}
{"id":"qerds-w0n","title":"Add vulnerability tracking model (REQ-H09)","description":"Add VulnerabilityFinding model and admin API for tracking security findings.\n\nImplementation:\n1. Add VulnerabilityFinding model:\n   - id, source (trivy/pentest/manual), finding_id, severity, status\n   - title, description, affected_component\n   - discovered_at, remediated_at, remediation_notes\n   - exception_approved_by, exception_reason, exception_expires\n   \n2. Add admin API endpoints:\n   - POST /admin/vulnerabilities (import findings)\n   - GET /admin/vulnerabilities (list with filters)\n   - PATCH /admin/vulnerabilities/{id} (update status/remediation)\n   - GET /admin/vulnerabilities/export (audit-ready export)\n\n3. Support bulk import from scanner JSON (Trivy format)\n\nTest coverage:\n- CRUD operations\n- Status transitions\n- Export for audit pack\n\nCovers: REQ-H09","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:46.33065813Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.476521573Z","closed_at":"2026-01-23T03:57:48.476521573Z","close_reason":"Closed","labels":["compliance","feature","security"]}
{"id":"qerds-wla","title":"Write unit tests for RBAC/authorization","description":"Create comprehensive tests for authorization.\n\n## Test Coverage\n- Role-based access control\n- Permission checking\n- Separation of duties\n- Admin action logging\n- Unauthorized access rejection\n\n## Requirements\n- All roles tested\n- All protected endpoints tested\n- Dual-control scenarios\n\n## Acceptance\n- All tests pass\n- Authorization properly enforced\n- Tests verify security log entries\n\nRefs: specs/implementation/20-identities-and-roles.md","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:42:48.265493+04:00","created_by":"Vincent","updated_at":"2026-01-22T15:33:14.683698141Z","closed_at":"2026-01-22T15:33:14.683698141Z","close_reason":"Closed","labels":["component:unit-tests","phase:11-testing","priority:critical"],"dependencies":[{"issue_id":"qerds-wla","depends_on_id":"qerds-pwn","type":"blocks","created_at":"2026-01-18T11:42:48.266873+04:00","created_by":"Vincent"},{"issue_id":"qerds-wla","depends_on_id":"qerds-4b9","type":"blocks","created_at":"2026-01-18T11:42:48.26791+04:00","created_by":"Vincent"},{"issue_id":"qerds-wla","depends_on_id":"qerds-1dg","type":"parent-child","created_at":"2026-01-22T10:10:33.759939359Z","created_by":"ubuntu"}]}
{"id":"qerds-wp0","title":"Create admin audit and config management views","description":"Create admin views for audit pack generation and config management.\n\n## Audit Pack View\n- Date range selector\n- Evidence sample size\n- Generate button\n- List of generated packs with download\n\n## Config Management View\n- Current config display\n- Config snapshot history\n- Create snapshot button\n\n## Access Review View\n- RBAC bindings export\n- Last activity timestamps\n\n## Requirements\n- Admin-only access\n- Match design language\n- i18n support\n\n## Acceptance\n- Views work correctly\n- Admin auth enforced\n- Tests verify functionality\n\nRefs: mocks/templates/admin/dashboard.html (extend from dashboard)","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:43:50.08143+04:00","created_by":"Vincent","updated_at":"2026-01-22T15:33:26.239947993Z","closed_at":"2026-01-22T15:33:26.239947993Z","close_reason":"Closed","labels":["component:admin","phase:7-frontend","priority:medium"],"dependencies":[{"issue_id":"qerds-wp0","depends_on_id":"qerds-dvs","type":"blocks","created_at":"2026-01-18T11:43:50.082483+04:00","created_by":"Vincent"},{"issue_id":"qerds-wp0","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:33.787172129Z","created_by":"ubuntu"}]}
{"id":"qerds-wqk","title":"Refactor PDF templates to use i18n translation function","description":"The PDF proof templates contain extensive hardcoded French strings instead of using the i18n system.\n\n**Affected files**:\n- pdf/base.html\n- pdf/deposit.html\n- pdf/proof_acceptance.html\n- pdf/proof_refusal.html\n- pdf/proof_negligence.html\n- pdf/proof_placeholder.html\n\n**Examples of hardcoded strings**:\n- 'Preuve de Depot'\n- 'Lettre Recommandee Electronique Qualifiee'\n- 'Sceau electronique qualifie du prestataire'\n- Legal notices and verification instructions\n\n**Tasks**:\n1. Ensure WeasyPrint/PDF renderer supports translator context\n2. Replace hardcoded French strings with `{{ _('pdf.key') }}` calls\n3. Update PDF generation service to pass language and translator\n4. Add tests for PDF translation in both locales\n\n**Translation keys**: Already added to en.json and fr.json (pdf.* namespace with 50+ new keys)\n\n**Reference**: docs/audits/i18n-audit-2026-01-23.md","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:53:12.068993158Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T04:37:40.329792395Z","closed_at":"2026-01-23T04:37:40.329792395Z","close_reason":"Refactored PDF templates to use i18n translator"}
{"id":"qerds-x0y","title":"Implement recipient pickup flow with authentication wall","description":"Create the recipient pickup flow with mandatory authentication.\n\n## Flow (per specs/implementation/05-architecture.md)\n1. Recipient receives email with magic link (claim token)\n2. Link redirects to pickup portal (no content access yet!)\n3. Recipient MUST authenticate via FranceConnect+\n4. After auth (IAL_SUBSTANTIAL+), recipient can:\n   - View delivery info (sender still hidden)\n   - Accept or Refuse\n5. After accept/refuse, sender identity revealed\n6. After accept, content download enabled\n\n## Requirements\n- Magic link is NOT direct content access\n- Authentication required before any action\n- IAL level enforcement for LRE mode\n- Consumer consent check (REQ-F06)\n- Evidence events on all actions\n\n## Acceptance\n- Flow works end-to-end\n- Unauthenticated users cannot access content\n- Sender identity hidden until accept/refuse\n- Tests cover complete flow\n\nRefs: specs/implementation/20-identities-and-roles.md, REQ-E02, REQ-F03","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:38:48.646319+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:06:31.822717371Z","closed_at":"2026-01-22T20:06:31.822717371Z","close_reason":"Closed","labels":["compliance:REQ-E02","compliance:REQ-F03","compliance:REQ-F06","component:recipient","phase:5-identity","priority:critical"],"dependencies":[{"issue_id":"qerds-x0y","depends_on_id":"qerds-jbl","type":"blocks","created_at":"2026-01-18T11:38:48.648162+04:00","created_by":"Vincent"},{"issue_id":"qerds-x0y","depends_on_id":"qerds-juv","type":"blocks","created_at":"2026-01-18T11:38:48.649041+04:00","created_by":"Vincent"},{"issue_id":"qerds-x0y","depends_on_id":"qerds-m5j","type":"parent-child","created_at":"2026-01-22T10:10:33.81435244Z","created_by":"ubuntu"}]}
{"id":"qerds-x2n","title":"Create conformity assessment preparation guide (REQ-A02)","description":"Create docs/compliance/conformity-assessment.md explaining how to prepare for and pass conformity assessments.\n\nContents:\n1. What is conformity assessment?\n   - Purpose and scope\n   - Assessment body selection\n   - Assessment frequency\n\n2. Evidence required for assessment\n   - Technical documentation\n   - Policy documents\n   - Operational evidence\n   - Using the platform's audit pack feature\n\n3. Pre-assessment checklist\n   - Platform configuration review\n   - Policy document completeness\n   - Evidence collection\n   - Test environment preparation\n\n4. During assessment\n   - What assessors will examine\n   - Technical demonstrations\n   - Document reviews\n   - Staff interviews\n\n5. Post-assessment\n   - Addressing findings\n   - Remediation timeline\n   - Re-assessment triggers\n\n6. Platform features for assessment\n   - Audit pack generation (POST /admin/audit-packs)\n   - Traceability matrix (GET /admin/traceability-matrix)\n   - Conformity packages (POST /admin/conformity-packages)\n\nReferences:\n- ETSI EN 319 403 (assessment of conformity assessment bodies)\n- specs/implementation/80-audit-and-conformity.md\n\nCovers: REQ-A02, REQ-H01","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:36:54.379133501Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.461859127Z","closed_at":"2026-01-23T03:57:48.461859127Z","close_reason":"Closed","labels":["compliance","docs"]}
{"id":"qerds-x70","title":"Create vulnerability scanning runbook (REQ-D05)","description":"Create docs/runbooks/vulnerability-scanning.md documenting quarterly vulnerability scanning procedures.\n\nContents:\n1. Scanning requirements\n   - Quarterly minimum frequency\n   - Scope: all system components\n   - Tool recommendations (Trivy, OpenVAS, etc.)\n\n2. Pre-scan preparation\n   - Inventory current systems\n   - Update scanner signatures\n   - Define scan targets\n\n3. Scan execution\n   - Container image scanning\n   - Dependency scanning (pip-audit, npm audit)\n   - Infrastructure scanning\n   - Web application scanning\n\n4. Results processing\n   - Severity classification (CVSS)\n   - False positive review\n   - Risk acceptance process\n\n5. Remediation workflow\n   - Patching priorities by severity\n   - Remediation timeline expectations\n   - Exception documentation\n\n6. Recording evidence\n   - Import findings to platform (POST /admin/vulnerabilities)\n   - Generate scan report for audit pack\n   - Track remediation progress\n\n7. Sample automation scripts\n   - Trivy container scanning\n   - pip-audit for Python deps\n   - Integration with CI/CD\n\nReferences:\n- ETSI EN 319 401 clause on vulnerability management\n- Implementing Regulation 2025/1944\n\nCovers: REQ-D05, REQ-H09","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:36:55.412773934Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:57:48.458688458Z","closed_at":"2026-01-23T03:57:48.458688458Z","close_reason":"Closed","labels":["docs","operations","security"]}
{"id":"qerds-xmz","title":"Backup/restore + DR exercise evidence (REQ-D09/H08)","description":"Implement backup/restore and DR exercise evidence generation suitable for audits.\n\n## Scope Note (Important)\nThis is primarily an **operator/infra** obligation. MVP implementation does **not** include building the operator’s backup infrastructure.\n\nThe software/platform requirement is to:\n- Make it possible to **store** backup/restore/DR exercise artifacts (logs, runbooks, results) in the platform’s audit storage.\n- Make it possible to **export** those artifacts as part of an audit pack.\n\n## Requirements\n- Define backup scope for PostgreSQL, object store (MinIO/S3), and audit logs.\n- Provide repeatable restore test procedure and capture evidence artifacts.\n- Document RPO/RTO targets and how to validate them (MVP-scoped).\n\n## Acceptance Criteria\n- The platform can store DR/backup exercise artifacts (files + metadata) and include them in an audit pack export.\n- Operator runbook/checklist exists (even if executed outside the platform).\n\nRefs: specs/implementation/90-security-and-ops-controls.md, specs/implementation/80-audit-and-conformity.md, REQ-D09, REQ-H08\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:38.562199+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:36:32.458546545Z","closed_at":"2026-01-22T20:36:32.458546545Z","close_reason":"Closed","labels":["compliance:REQ-D09","compliance:REQ-H08","component:devops","phase:9-audit","priority:critical"],"dependencies":[{"issue_id":"qerds-xmz","depends_on_id":"qerds-z6g","type":"blocks","created_at":"2026-01-18T12:40:36.735521+04:00","created_by":"Vincent"},{"issue_id":"qerds-xmz","depends_on_id":"qerds-h3s","type":"blocks","created_at":"2026-01-18T12:40:36.831182+04:00","created_by":"Vincent"},{"issue_id":"qerds-xmz","depends_on_id":"qerds-bpn","type":"blocks","created_at":"2026-01-18T12:40:36.929367+04:00","created_by":"Vincent"},{"issue_id":"qerds-xmz","depends_on_id":"qerds-ec1","type":"blocks","created_at":"2026-01-18T12:40:37.020937+04:00","created_by":"Vincent"},{"issue_id":"qerds-xmz","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:33.842187735Z","created_by":"ubuntu"}]}
{"id":"qerds-y7u","title":"Vulnerability management evidence (scan + pentest) (REQ-D05/D06/H09)","description":"Enable vulnerability management evidence suitable for audits, including quarterly vulnerability scans and annual penetration testing evidence handling.\n\n## Scope Note (Important)\nThis is primarily an **operator/process** obligation. MVP implementation does **not** include building a full scanning/pentest program.\n\nThe software/platform requirement is to:\n- Make it possible to **store** scan/pentest reports and remediation tracking artifacts.\n- Make it possible to **export** those artifacts as part of an audit pack.\n\n## Decision: Trivy-only (self-hosted, no outbound DB pulls)\nWe will use **Trivy only** for automated scanning, but **with zero outbound internet access from scanning runners**.\n\n### How this works (air-gap / controlled-update)\n- Maintain an **internal OCI registry** that mirrors Trivy databases:\n  - `trivy-db`\n  - `trivy-java-db`\n  - (optional) `trivy-checks`\n- A dedicated, controlled “update host” (operator-owned) periodically pulls upstream DB artifacts and **pushes** them to the internal registry.\n- Scanning jobs/runners are configured to use the internal registry via:\n  - `--db-repository`\n  - `--java-db-repository`\n  - `--checks-bundle-repository` (if we mirror checks)\n  - plus `--offline-scan` and skip-update flags on the scanning runners.\n\nThis satisfies the “don’t rely on external hosted providers / minimize external reliance” constraint while still keeping DBs current.\n\n## Evidence bundles\n### Quarterly vulnerability scans evidence (REQ-D05)\n- Scan scope (images/targets), tool versions, DB digest(s)/tags used.\n- SBOM(s) used (CycloneDX/SPDX) and scan output (JSON/SARIF).\n\n### Annual penetration test evidence (REQ-D06)\n- Signed report (external/manual), scope, methodology, findings.\n- Remediation plan and closure evidence.\n\n### Vulnerability management evidence retention/export (REQ-H09)\n- Store artifacts in object storage and include them in audit pack export.\n\n## Acceptance Criteria\n- Platform supports storing and exporting vuln mgmt artifacts (reports + metadata) via audit packs.\n- Operator workflow is documented (commands + artifact formats), executed outside the platform.\n\nRefs: specs/implementation/80-audit-and-conformity.md, REQ-D05, REQ-D06, REQ-H09\n\nImplementation references (Trivy docs): air-gapped / self-hosted DB support via OCI repositories (`--db-repository`, `--java-db-repository`).\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T12:39:31.291777+04:00","created_by":"Vincent","updated_at":"2026-01-22T20:36:32.489796368Z","closed_at":"2026-01-22T20:36:32.489796368Z","close_reason":"Closed","labels":["compliance:REQ-D05","compliance:REQ-D06","compliance:REQ-H09","component:security","phase:9-audit","priority:critical"],"dependencies":[{"issue_id":"qerds-y7u","depends_on_id":"qerds-z6g","type":"blocks","created_at":"2026-01-18T12:40:30.820482+04:00","created_by":"Vincent"},{"issue_id":"qerds-y7u","depends_on_id":"qerds-h3s","type":"blocks","created_at":"2026-01-18T12:40:30.912842+04:00","created_by":"Vincent"},{"issue_id":"qerds-y7u","depends_on_id":"qerds-ec1","type":"blocks","created_at":"2026-01-18T12:40:30.998989+04:00","created_by":"Vincent"},{"issue_id":"qerds-y7u","depends_on_id":"qerds-8wh","type":"parent-child","created_at":"2026-01-22T10:10:33.871114156Z","created_by":"ubuntu"}]}
{"id":"qerds-ygf","title":"Create placeholder policy documents (REQ-A03)","description":"Create stub policy documents in docs/policies/ with structure based on ETSI EN 319 401/521.\n\nRequired documents:\n1. Security Policy (security-policy.md)\n2. Incident Response Policy (incident-response.md)\n3. Business Continuity Policy (business-continuity.md)\n4. Key Management Policy (key-management.md)\n5. Evidence Management Policy (evidence-management.md)\n\nEach doc should have:\n- Scope and purpose\n- Roles and responsibilities (placeholder)\n- Key procedures (headings with TODO markers)\n- Review schedule\n- Version history table\n\nProvider fills in operational details during certification.\n\nCovers: REQ-A03","status":"closed","priority":2,"issue_type":"task","owner":"github-dev.me@5en1.com","created_at":"2026-01-23T03:33:06.718473225Z","created_by":"tubededentifrice-dev","updated_at":"2026-01-23T03:51:44.35774261Z","closed_at":"2026-01-23T03:51:44.35774261Z","close_reason":"Closed","labels":["compliance","docs","etsi"]}
{"id":"qerds-z6g","title":"Set up Docker Compose for full development stack","description":"Create docker-compose.yml that brings up the complete development environment.\n\n## Services Required\n- PostgreSQL 16 (primary database)\n- MinIO (S3-compatible storage)\n- Mailpit (email testing)\n- qerds-api (FastAPI application)\n- qerds-worker (background jobs)\n- qerds-trust (signing/timestamping service)\n\n## Optional (security tooling)\n- Internal OCI registry (`registry:2`) for mirroring artifacts like Trivy DBs, with basic auth.\n  - Enabled via compose profiles (e.g. `--profile security-tools`).\n  - Credentials via `.env` (see `.env.example`).\n\n## Requirements\n- `docker compose up` starts everything needed for dev\n- Proper networking between services\n- Volume mounts for data persistence\n- Environment variable configuration\n- Health checks for all services\n\n## Acceptance Criteria\n- `docker compose up` starts core dev services\n- `docker compose --profile security-tools up` starts optional tooling services\n- Services can communicate with each other\n- Data persists across restarts\n\nRefs: specs/implementation/05-architecture.md, AGENTS.md\n","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:35:40.466963+04:00","created_by":"Vincent","updated_at":"2026-01-22T11:36:01.589737719Z","closed_at":"2026-01-22T11:36:01.589737719Z","close_reason":"Closed","labels":["component:devops","phase:0-setup","priority:critical"],"dependencies":[{"issue_id":"qerds-z6g","depends_on_id":"qerds-znp","type":"parent-child","created_at":"2026-01-22T10:10:33.899757369Z","created_by":"ubuntu"}]}
{"id":"qerds-zjq","title":"Implement evidence object sealing and timestamping","description":"Create the evidence object sealing logic that uses qerds-trust.\n\n## Evidence Object Structure\n- payload: structured event fields\n- canonicalization: deterministic bytes\n- content_binding: cryptographic binding (SHA-256)\n- provider_attestation: CMS seal from qerds-trust\n- time_attestation: RFC 3161 timestamp\n- verification_bundle: certs, policies, algorithms\n- qualification_label: qualified/non_qualified (REQ-G02)\n\n## Requirements\n- Canonical serialization (deterministic)\n- Hash content and metadata\n- Call qerds-trust for sealing\n- Call qerds-trust for timestamping\n- Store verification bundle in object store\n- Track qualification_label\n\n## Acceptance\n- Evidence objects are properly sealed\n- Timestamps are included\n- Verification bundles are complete\n- Tests verify seal/timestamp validity\n\nRefs: specs/implementation/40-evidence-crypto-and-time.md, REQ-B02, REQ-C02, REQ-C03","status":"tombstone","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:37:41.322203+04:00","created_by":"Vincent","updated_at":"2026-01-18T11:37:49.160027+04:00","labels":["compliance:REQ-C03","component:evidence","phase:4-trust","priority:critical"],"deleted_at":"2026-01-18T11:37:49.160027+04:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"qerds-zni","title":"Implement background worker service (qerds-worker)","description":"Create the background worker service for async processing.\n\n## Job Types\n- send_notification - send initial/reminder emails\n- check_expiry - check for 15-day window expiry\n- process_bounce - handle email bounces\n- seal_checkpoint - periodic audit log sealing\n- enforce_retention - cleanup per retention policy\n\n## Requirements\n- Use PostgreSQL-backed job queue\n- Worker process lifecycle management\n- Graceful shutdown\n- Error handling and retries\n- Monitoring/health checks\n- Support for scheduled jobs\n\n## Scheduled Tasks\n- Expiry check: check deliveries past acceptance_deadline_at\n- Checkpoint sealing: periodic (e.g., hourly)\n- Retention enforcement: daily\n\n## Acceptance\n- Worker processes jobs reliably\n- Scheduled tasks run on time\n- Errors are handled gracefully\n- Tests cover all job types\n\nRefs: specs/implementation/05-architecture.md, REQ-F04, REQ-C05","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:14.653177+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:49:24.730396059Z","closed_at":"2026-01-22T12:49:24.730396059Z","close_reason":"Closed","labels":["compliance:REQ-F04","component:worker","phase:6-notifications","priority:high"],"dependencies":[{"issue_id":"qerds-zni","depends_on_id":"qerds-7br","type":"blocks","created_at":"2026-01-18T11:39:14.654333+04:00","created_by":"Vincent"},{"issue_id":"qerds-zni","depends_on_id":"qerds-e0i","type":"blocks","created_at":"2026-01-18T11:39:14.655268+04:00","created_by":"Vincent"},{"issue_id":"qerds-zni","depends_on_id":"qerds-s5z","type":"blocks","created_at":"2026-01-18T12:36:53.357658+04:00","created_by":"Vincent"},{"issue_id":"qerds-zni","depends_on_id":"qerds-5jg","type":"parent-child","created_at":"2026-01-22T10:10:33.928406343Z","created_by":"ubuntu"}]}
{"id":"qerds-znp","title":"Foundation and Setup","description":"Core project setup and infrastructure configuration","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-22T10:09:39.628659888Z","created_by":"ubuntu","updated_at":"2026-01-23T04:51:38.014388166Z","closed_at":"2026-01-23T04:51:38.014388166Z","close_reason":"All child tasks completed","labels":["epic","phase:0-setup"]}
{"id":"qerds-zog","title":"Implement login page and authentication views","description":"Create the login page and authentication views matching mocks/templates/login.html.\n\n## Views\n- GET /login - login page with FranceConnect+ button\n- GET /auth/callback - OIDC callback handler\n- GET /logout - logout handler\n\n## Requirements\n- Match mock design exactly\n- FranceConnect+ button styling\n- Dev mode warning banner\n- Alternative email/password form (for non-FC+ auth)\n- i18n support (French + English)\n\n## Acceptance\n- Login page matches mock\n- FranceConnect+ flow works\n- Dev banner shows in non-qualified mode\n- Responsive design\n\nRefs: mocks/templates/login.html","status":"closed","priority":2,"issue_type":"task","owner":"github.me@5en1.com","created_at":"2026-01-18T11:39:53.293949+04:00","created_by":"Vincent","updated_at":"2026-01-22T12:58:56.53728863Z","closed_at":"2026-01-22T12:58:56.53728863Z","close_reason":"Closed","labels":["component:auth","phase:7-frontend","priority:critical"],"dependencies":[{"issue_id":"qerds-zog","depends_on_id":"qerds-3uw","type":"blocks","created_at":"2026-01-18T11:39:53.295775+04:00","created_by":"Vincent"},{"issue_id":"qerds-zog","depends_on_id":"qerds-juv","type":"blocks","created_at":"2026-01-18T11:39:53.297029+04:00","created_by":"Vincent"},{"issue_id":"qerds-zog","depends_on_id":"qerds-5gc","type":"parent-child","created_at":"2026-01-22T10:10:33.956694172Z","created_by":"ubuntu"}]}
